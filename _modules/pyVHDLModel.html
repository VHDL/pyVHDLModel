

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyVHDLModel &mdash; pyVHDLModel 0.33.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=55b73dce" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-reports.089ed2e62f89368aa21ac7591d90c12a.css?v=83177741" />
      <link rel="stylesheet" type="text/css" href="../_static/css/override.css?v=e6c450a4" />

  
    <link rel="shortcut icon" href="../_static/favicon.svg"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=3595839c"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs"></script>
      <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
      <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
      <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
      <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";

const style = document.createElement('style');
style.textContent = `.mermaid-container {
    position: relative !important;
    display: inline-block;
    width: 100%;
}

.mermaid-fullscreen-btn {
    position: absolute !important;
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    cursor: pointer;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    font-size: 14px;
    line-height: 1;
    padding: 0;
    color: #333;
}

.mermaid-fullscreen-btn:hover {
    opacity: 100% !important;
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    transform: scale(1.1);
}

.mermaid-fullscreen-btn.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #e0e0e0;
}

.mermaid-fullscreen-btn.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 3px 10px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal {
    display: none;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw;
    height: 100vh;
    background: rgba(255, 255, 255, 0.98);
    z-index: 9999;
    padding: 20px;
    overflow: auto;
}

.mermaid-fullscreen-modal.dark-theme {
    background: rgba(0, 0, 0, 0.98);
}

.mermaid-fullscreen-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-fullscreen-content {
    position: relative;
    width: 95vw;
    height: 90vh;
    max-width: 95vw;
    max-height: 90vh;
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    overflow: auto;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-fullscreen-content.dark-theme {
    background: #1a1a1a;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
}

.mermaid-fullscreen-content .mermaid {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-fullscreen-content .mermaid svg {
    width: 100%;
    height: auto;
    max-width: 100%;
    max-height: 85vh;
    cursor: grab;
}

.mermaid-fullscreen-close {
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    cursor: pointer;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
    font-size: 24px;
    line-height: 1;
    color: #333;
}

.mermaid-fullscreen-close:hover {
    background: white;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
    transform: scale(1.1);
}

.mermaid-fullscreen-close.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e0e0e0;
}

.mermaid-fullscreen-close.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 6px 16px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal .mermaid-fullscreen-btn {
    display: none !important;
}
`;
document.head.appendChild(style);

// Detect if page has dark background
const isDarkTheme = () => {
    const bgColor = window.getComputedStyle(document.body).backgroundColor;
    const match = bgColor.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
        const r = parseInt(match[1]);
        const g = parseInt(match[2]);
        const b = parseInt(match[3]);
        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
        return brightness < 128;
    }
    return false;
};

const initFullscreen = async () => {
    await mermaid.run();

    const all_mermaids = document.querySelectorAll(".mermaid");
    const mermaids_processed = document.querySelectorAll(".mermaid[data-processed='true']");

    if(all_mermaids.length !== mermaids_processed.length) {
        // Wait for mermaid to process all diagrams
        setTimeout(initFullscreen, 200);
        return;
    }

    const darkTheme = isDarkTheme();

    const modal = document.createElement('div');
    modal.className = 'mermaid-fullscreen-modal' + (darkTheme ? ' dark-theme' : '');
    modal.setAttribute('role', 'dialog');
    modal.setAttribute('aria-modal', 'true');
    modal.setAttribute('aria-label', 'Fullscreen diagram viewer');
    modal.innerHTML = `
        <button class="mermaid-fullscreen-close${darkTheme ? ' dark-theme' : ''}" aria-label="Close fullscreen">✕</button>
        <div class="mermaid-fullscreen-content${darkTheme ? ' dark-theme' : ''}"></div>
    `;
    document.body.appendChild(modal);

    const modalContent = modal.querySelector('.mermaid-fullscreen-content');
    const closeBtn = modal.querySelector('.mermaid-fullscreen-close');

    const closeModal = () => {
        modal.classList.remove('active');
        modalContent.innerHTML = '';
        document.body.style.overflow = '';
    };

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });

    const allButtons = [];

    document.querySelectorAll('.mermaid').forEach((mermaidDiv) => {
        if (mermaidDiv.parentNode.classList.contains('mermaid-container') ||
            mermaidDiv.closest('.mermaid-fullscreen-modal')) {
            return;
        }

        const container = document.createElement('div');
        container.className = 'mermaid-container';
        mermaidDiv.parentNode.insertBefore(container, mermaidDiv);
        container.appendChild(mermaidDiv);

        const fullscreenBtn = document.createElement('button');
        fullscreenBtn.className = 'mermaid-fullscreen-btn' + (darkTheme ? ' dark-theme' : '');
        fullscreenBtn.setAttribute('aria-label', 'View diagram in fullscreen');
        fullscreenBtn.textContent = '⛶';

        // Calculate dynamic position based on diagram's margin and padding
        const diagramStyle = window.getComputedStyle(mermaidDiv);
        const marginTop = parseFloat(diagramStyle.marginTop) || 0;
        const marginRight = parseFloat(diagramStyle.marginRight) || 0;
        const paddingTop = parseFloat(diagramStyle.paddingTop) || 0;
        const paddingRight = parseFloat(diagramStyle.paddingRight) || 0;
        fullscreenBtn.style.top = `${marginTop + paddingTop + 4}px`;
        fullscreenBtn.style.right = `${marginRight + paddingRight + 4}px`;

        fullscreenBtn.addEventListener('click', () => {
            const clone = mermaidDiv.cloneNode(true);
            modalContent.innerHTML = '';
            modalContent.appendChild(clone);

            const svg = clone.querySelector('svg');
            if (svg) {
                svg.removeAttribute('width');
                svg.removeAttribute('height');
                svg.style.width = '100%';
                svg.style.height = 'auto';
                svg.style.maxWidth = '100%';
                svg.style.display = 'block';
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        container.appendChild(fullscreenBtn);
        allButtons.push(fullscreenBtn);
    });

    // Update theme classes when theme changes
    const updateTheme = () => {
        const dark = isDarkTheme();
        allButtons.forEach(btn => {
            if (dark) {
                btn.classList.add('dark-theme');
            } else {
                btn.classList.remove('dark-theme');
            }
        });
        if (dark) {
            modal.classList.add('dark-theme');
            modalContent.classList.add('dark-theme');
            closeBtn.classList.add('dark-theme');
        } else {
            modal.classList.remove('dark-theme');
            modalContent.classList.remove('dark-theme');
            closeBtn.classList.remove('dark-theme');
        }
    };

    // Watch for theme changes
    const observer = new MutationObserver(updateTheme);
    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class', 'style', 'data-theme']
    });
    observer.observe(document.body, {
        attributes: true,
        attributeFilter: ['class', 'style']
    });
};

window.addEventListener("load", initFullscreen);
</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference external" href="https://edaa-org.github.io/">Used as a layer of EDA² ➚</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation/Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dependency.html">Dependency</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../LanguageModel/index.html">VHDL Language Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Analyze/index.html">Analyze</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DataStructure/index.html">Data Structures</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References and Reports</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pyVHDLModel/pyVHDLModel.html">Python Class Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unittests/index.html">Unittest Summary Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coverage/index.html">Code Coverage Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CodeCoverage.html">Code Coverage Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DocCoverage.html">Doc. Coverage Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typing/index.html">Static Type Check Report ➚</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ChangeLog/index.html">ChangeLog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../License.html">Apache License 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Doc-License.html">Creative Commons Attribution 4.0 International</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../py-modindex.html">Python Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TODO.html">TODOs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyVHDLModel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">pyVHDLModel</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pyVHDLModel</h1><div class="highlight"><pre>
<span></span><span class="c1"># ==================================================================================================================== #</span>
<span class="c1">#             __     ___   _ ____  _     __  __           _      _                                                     #</span>
<span class="c1">#   _ __  _   \ \   / / | | |  _ \| |   |  \/  | ___   __| | ___| |                                                    #</span>
<span class="c1">#  | &#39;_ \| | | \ \ / /| |_| | | | | |   | |\/| |/ _ \ / _` |/ _ \ |                                                    #</span>
<span class="c1">#  | |_) | |_| |\ V / |  _  | |_| | |___| |  | | (_) | (_| |  __/ |                                                    #</span>
<span class="c1">#  | .__/ \__, | \_/  |_| |_|____/|_____|_|  |_|\___/ \__,_|\___|_|                                                    #</span>
<span class="c1">#  |_|    |___/                                                                                                        #</span>
<span class="c1"># ==================================================================================================================== #</span>
<span class="c1"># Authors:                                                                                                             #</span>
<span class="c1">#   Patrick Lehmann                                                                                                    #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1"># License:                                                                                                             #</span>
<span class="c1"># ==================================================================================================================== #</span>
<span class="c1"># Copyright 2017-2025 Patrick Lehmann - Boetzingen, Germany                                                            #</span>
<span class="c1"># Copyright 2016-2017 Patrick Lehmann - Dresden, Germany                                                               #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                      #</span>
<span class="c1"># you may not use this file except in compliance with the License.                                                     #</span>
<span class="c1"># You may obtain a copy of the License at                                                                              #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1">#   http://www.apache.org/licenses/LICENSE-2.0                                                                         #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software                                                  #</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                                    #</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                             #</span>
<span class="c1"># See the License for the specific language governing permissions and                                                  #</span>
<span class="c1"># limitations under the License.                                                                                       #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1"># SPDX-License-Identifier: Apache-2.0                                                                                  #</span>
<span class="c1"># ==================================================================================================================== #</span>
<span class="c1">#</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">**An abstract VHDL language model.**</span>

<span class="sd">This package provides a unified abstract language model for VHDL. Projects reading from source files can derive own</span>
<span class="sd">classes and implement additional logic to create a concrete language model for their tools.</span>

<span class="sd">Projects consuming pre-processed VHDL data (parsed, analyzed or elaborated) can build higher level features and services</span>
<span class="sd">on such a model, while supporting multiple frontends.</span>

<span class="sd">.. admonition:: Copyright Information</span>

<span class="sd">   :copyright: Copyright 2017-2025 Patrick Lehmann - Bötzingen, Germany</span>
<span class="sd">   :copyright: Copyright 2016-2017 Patrick Lehmann - Dresden, Germany</span>
<span class="sd">   :license: Apache License, Version 2.0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">__author__</span> <span class="o">=</span>    <span class="s2">&quot;Patrick Lehmann&quot;</span>
<span class="n">__email__</span> <span class="o">=</span>     <span class="s2">&quot;Paebbels@gmail.com&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;2016-2025, Patrick Lehmann&quot;</span>
<span class="n">__license__</span> <span class="o">=</span>   <span class="s2">&quot;Apache License, Version 2.0&quot;</span>
<span class="n">__version__</span> <span class="o">=</span>   <span class="s2">&quot;0.33.0&quot;</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w">                      </span><span class="kn">import</span> <span class="n">unique</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Flag</span><span class="p">,</span> <span class="n">auto</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w">                   </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sys</span><span class="w">                       </span><span class="kn">import</span> <span class="n">version_info</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w">                    </span><span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Optional</span> <span class="k">as</span> <span class="n">Nullable</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyTooling.Common</span><span class="w">          </span><span class="kn">import</span> <span class="n">getFullyQualifiedName</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyTooling.Decorators</span><span class="w">      </span><span class="kn">import</span> <span class="n">export</span><span class="p">,</span> <span class="n">readonly</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyTooling.Graph</span><span class="w">           </span><span class="kn">import</span> <span class="n">Graph</span><span class="p">,</span> <span class="n">Vertex</span><span class="p">,</span> <span class="n">Edge</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyTooling.Warning</span><span class="w">         </span><span class="kn">import</span> <span class="n">WarningCollector</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Exception</span><span class="w">     </span><span class="kn">import</span> <span class="n">VHDLModelException</span><span class="p">,</span> <span class="n">NotImplementedWarning</span><span class="p">,</span> <span class="n">BlackboxWarning</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Exception</span><span class="w">     </span><span class="kn">import</span> <span class="n">LibraryExistsInDesignError</span><span class="p">,</span> <span class="n">LibraryRegisteredToForeignDesignError</span><span class="p">,</span> <span class="n">LibraryNotRegisteredError</span><span class="p">,</span> <span class="n">EntityExistsInLibraryError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Exception</span><span class="w">     </span><span class="kn">import</span> <span class="n">ArchitectureExistsInLibraryError</span><span class="p">,</span> <span class="n">PackageExistsInLibraryError</span><span class="p">,</span> <span class="n">PackageBodyExistsError</span><span class="p">,</span> <span class="n">ConfigurationExistsInLibraryError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Exception</span><span class="w">     </span><span class="kn">import</span> <span class="n">ContextExistsInLibraryError</span><span class="p">,</span> <span class="n">ReferencedLibraryNotExistingError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Base</span><span class="w">          </span><span class="kn">import</span> <span class="n">ModelEntity</span><span class="p">,</span> <span class="n">NamedEntityMixin</span><span class="p">,</span> <span class="n">MultipleNamedEntityMixin</span><span class="p">,</span> <span class="n">DocumentedEntityMixin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Expression</span><span class="w">    </span><span class="kn">import</span> <span class="n">UnaryExpression</span><span class="p">,</span> <span class="n">BinaryExpression</span><span class="p">,</span> <span class="n">TernaryExpression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Namespace</span><span class="w">     </span><span class="kn">import</span> <span class="n">Namespace</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Object</span><span class="w">        </span><span class="kn">import</span> <span class="n">Obj</span><span class="p">,</span> <span class="n">Signal</span><span class="p">,</span> <span class="n">Constant</span><span class="p">,</span> <span class="n">DeferredConstant</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Symbol</span><span class="w">        </span><span class="kn">import</span> <span class="n">PackageReferenceSymbol</span><span class="p">,</span> <span class="n">AllPackageMembersReferenceSymbol</span><span class="p">,</span> <span class="n">PackageMemberReferenceSymbol</span><span class="p">,</span> <span class="n">SimpleObjectOrFunctionCallSymbol</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Concurrent</span><span class="w">    </span><span class="kn">import</span> <span class="n">EntityInstantiation</span><span class="p">,</span> <span class="n">ComponentInstantiation</span><span class="p">,</span> <span class="n">ConfigurationInstantiation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.DesignUnit</span><span class="w">    </span><span class="kn">import</span> <span class="n">DesignUnit</span><span class="p">,</span> <span class="n">PrimaryUnit</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">,</span> <span class="n">Package</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.PSLModel</span><span class="w">      </span><span class="kn">import</span> <span class="n">VerificationUnit</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">,</span> <span class="n">VerificationMode</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Instantiation</span><span class="w"> </span><span class="kn">import</span> <span class="n">PackageInstantiation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Type</span><span class="w">          </span><span class="kn">import</span> <span class="n">IntegerType</span><span class="p">,</span> <span class="n">PhysicalType</span><span class="p">,</span> <span class="n">ArrayType</span><span class="p">,</span> <span class="n">RecordType</span>


<div class="viewcode-block" id="VHDLVersion">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion">[docs]</a>
<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span><span class="w"> </span><span class="nc">VHDLVersion</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	An enumeration for all possible version numbers for VHDL and VHDL-AMS.</span>

<span class="sd">	A version can be given as integer or string and is represented as a unified</span>
<span class="sd">	enumeration value.</span>

<span class="sd">	This enumeration supports compare operators.</span>
<span class="sd">	&quot;&quot;&quot;</span>

	<span class="n">Any</span> <span class="o">=</span>                <span class="o">-</span><span class="mi">1</span>  <span class="c1">#: Any</span>
	<span class="n">VHDL87</span> <span class="o">=</span>             <span class="mi">87</span>  <span class="c1">#: VHDL-1987</span>
	<span class="n">VHDL93</span> <span class="o">=</span>             <span class="mi">93</span>  <span class="c1">#: VHDL-1993</span>
	<span class="n">AMS93</span> <span class="o">=</span>            <span class="mi">1993</span>  <span class="c1">#: VHDL-AMS-1993</span>
	<span class="n">AMS99</span> <span class="o">=</span>            <span class="mi">1999</span>  <span class="c1">#: VHDL-AMS-1999</span>
	<span class="n">VHDL2000</span> <span class="o">=</span>         <span class="mi">2000</span>  <span class="c1">#: VHDL-2000</span>
	<span class="n">VHDL2002</span> <span class="o">=</span>         <span class="mi">2002</span>  <span class="c1">#: VHDL-2002</span>
	<span class="n">VHDL2008</span> <span class="o">=</span>         <span class="mi">2008</span>  <span class="c1">#: VHDL-2008</span>
	<span class="n">AMS2017</span> <span class="o">=</span>          <span class="mi">2017</span>  <span class="c1">#: VHDL-AMS-2017</span>
	<span class="n">VHDL2019</span> <span class="o">=</span>         <span class="mi">2019</span>  <span class="c1">#: VHDL-2019</span>
	<span class="n">Latest</span> <span class="o">=</span>          <span class="mi">10000</span>  <span class="c1">#: Latest VHDL (2019)</span>

	<span class="n">__VERSION_MAPPINGS__</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">Enum</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="o">-</span><span class="mi">1</span><span class="p">:</span>       <span class="n">Any</span><span class="p">,</span>
		<span class="mi">87</span><span class="p">:</span>       <span class="n">VHDL87</span><span class="p">,</span>
		<span class="mi">93</span><span class="p">:</span>       <span class="n">VHDL93</span><span class="p">,</span>
		<span class="c1"># 93:       AMS93,</span>
		<span class="mi">99</span><span class="p">:</span>       <span class="n">AMS99</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">:</span>        <span class="n">VHDL2000</span><span class="p">,</span>
		<span class="mi">2</span><span class="p">:</span>        <span class="n">VHDL2002</span><span class="p">,</span>
		<span class="mi">8</span><span class="p">:</span>        <span class="n">VHDL2008</span><span class="p">,</span>
		<span class="mi">17</span><span class="p">:</span>       <span class="n">AMS2017</span><span class="p">,</span>
		<span class="mi">19</span><span class="p">:</span>       <span class="n">VHDL2019</span><span class="p">,</span>
		<span class="mi">1987</span><span class="p">:</span>     <span class="n">VHDL87</span><span class="p">,</span>
		<span class="c1"># 1993:     VHDL93,</span>
		<span class="mi">1993</span><span class="p">:</span>     <span class="n">AMS93</span><span class="p">,</span>
		<span class="mi">1999</span><span class="p">:</span>     <span class="n">AMS99</span><span class="p">,</span>
		<span class="mi">2000</span><span class="p">:</span>     <span class="n">VHDL2000</span><span class="p">,</span>
		<span class="mi">2002</span><span class="p">:</span>     <span class="n">VHDL2002</span><span class="p">,</span>
		<span class="mi">2008</span><span class="p">:</span>     <span class="n">VHDL2008</span><span class="p">,</span>
		<span class="mi">2017</span><span class="p">:</span>     <span class="n">AMS2017</span><span class="p">,</span>
		<span class="mi">2019</span><span class="p">:</span>     <span class="n">VHDL2019</span><span class="p">,</span>
		<span class="mi">10000</span><span class="p">:</span>    <span class="n">Latest</span><span class="p">,</span>
		<span class="s2">&quot;Any&quot;</span><span class="p">:</span>    <span class="n">Any</span><span class="p">,</span>
		<span class="s2">&quot;87&quot;</span><span class="p">:</span>     <span class="n">VHDL87</span><span class="p">,</span>
		<span class="s2">&quot;93&quot;</span><span class="p">:</span>     <span class="n">VHDL93</span><span class="p">,</span>
		<span class="c1"># &quot;93&quot;:     AMS93,</span>
		<span class="s2">&quot;99&quot;</span><span class="p">:</span>     <span class="n">AMS99</span><span class="p">,</span>
		<span class="s2">&quot;00&quot;</span><span class="p">:</span>     <span class="n">VHDL2000</span><span class="p">,</span>
		<span class="s2">&quot;02&quot;</span><span class="p">:</span>     <span class="n">VHDL2002</span><span class="p">,</span>
		<span class="s2">&quot;08&quot;</span><span class="p">:</span>     <span class="n">VHDL2008</span><span class="p">,</span>
		<span class="s2">&quot;17&quot;</span><span class="p">:</span>     <span class="n">AMS2017</span><span class="p">,</span>
		<span class="s2">&quot;19&quot;</span><span class="p">:</span>     <span class="n">VHDL2019</span><span class="p">,</span>
		<span class="s2">&quot;1987&quot;</span><span class="p">:</span>   <span class="n">VHDL87</span><span class="p">,</span>
		<span class="c1"># &quot;1993&quot;:   VHDL93,</span>
		<span class="s2">&quot;1993&quot;</span><span class="p">:</span>   <span class="n">AMS93</span><span class="p">,</span>
		<span class="s2">&quot;1999&quot;</span><span class="p">:</span>   <span class="n">AMS99</span><span class="p">,</span>
		<span class="s2">&quot;2000&quot;</span><span class="p">:</span>   <span class="n">VHDL2000</span><span class="p">,</span>
		<span class="s2">&quot;2002&quot;</span><span class="p">:</span>   <span class="n">VHDL2002</span><span class="p">,</span>
		<span class="s2">&quot;2008&quot;</span><span class="p">:</span>   <span class="n">VHDL2008</span><span class="p">,</span>
		<span class="s2">&quot;2017&quot;</span><span class="p">:</span>   <span class="n">AMS2017</span><span class="p">,</span>
		<span class="s2">&quot;2019&quot;</span><span class="p">:</span>   <span class="n">VHDL2019</span><span class="p">,</span>
		<span class="s2">&quot;Latest&quot;</span><span class="p">:</span> <span class="n">Latest</span><span class="p">,</span>
	<span class="p">}</span>  <span class="c1">#: Dictionary of VHDL and VHDL-AMS year codes variants as integer and strings for mapping to unique enum values.</span>

<div class="viewcode-block" id="VHDLVersion.__init__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__init__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Patch the embedded MAP dictionary&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">__VERSION_MAPPINGS__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="n">v</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
				<span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">__VERSION_MAPPINGS__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="VHDLVersion.Parse">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.Parse">[docs]</a>
	<span class="nd">@classmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Parse</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;VHDLVersion&quot;</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Parses a VHDL or VHDL-AMS year code as integer or string to an enum value.</span>

<span class="sd">		:param value:       VHDL/VHDL-AMS year code.</span>
<span class="sd">		:returns:           Enumeration value.</span>
<span class="sd">		:raises ValueError: If the year code is not recognized.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__VERSION_MAPPINGS__</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">!s}</span><span class="s2">&#39; cannot be parsed to member of </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="VHDLVersion.__lt__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__lt__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is less than the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is less than the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="VHDLVersion.__le__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__le__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is less or equal than the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is less or equal than the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="VHDLVersion.__gt__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__gt__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is greater than the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is greater than the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="VHDLVersion.__ge__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__ge__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is greater or equal than the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is greater or equal than the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="VHDLVersion.__ne__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__ne__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is unequal to the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is unequal to the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="VHDLVersion.__eq__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__eq__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is equal to the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is equal to the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">if</span> <span class="p">(</span><span class="bp">self</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">other</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
				<span class="k">return</span> <span class="kc">True</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span></div>


	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">IsVHDL</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Checks if the version is a VHDL (not VHDL-AMS) version.</span>

<span class="sd">		:returns:          True if version is a VHDL version.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VHDL87</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VHDL93</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VHDL2002</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VHDL2008</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VHDL2019</span><span class="p">)</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">IsAMS</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Checks if the version is a VHDL-AMS (not VHDL) version.</span>

<span class="sd">		:returns:          True if version is a VHDL-AMS version.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AMS93</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">AMS99</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">AMS2017</span><span class="p">)</span>

<div class="viewcode-block" id="VHDLVersion.__str__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__str__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats the VHDL version to pattern ``VHDL&#39;xx`` or in case of VHDL-AMS to ``VHDL-AMS&#39;xx``.</span>

<span class="sd">		:return: Formatted VHDL/VHDL-AMS version.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Any</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;VHDL&#39;Any&quot;</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Latest</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;VHDL&#39;Latest&quot;</span>

		<span class="n">year</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsVHDL</span><span class="p">:</span>
			<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;VHDL&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;VHDL-AMS&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="VHDLVersion.__repr__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.VHDLVersion.__repr__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats the VHDL/VHDL-AMS version to pattern ``xxxx``.</span>

<span class="sd">		:return: Formatted VHDL/VHDL-AMS version.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Any</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;Any&quot;</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Latest</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;Latest&quot;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="IEEEFlavor">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.IEEEFlavor">[docs]</a>
<span class="nd">@export</span>
<span class="k">class</span><span class="w"> </span><span class="nc">IEEEFlavor</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
	<span class="n">IEEE</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">Synopsys</span> <span class="o">=</span> <span class="mi">1</span>
	<span class="n">MentorGraphics</span> <span class="o">=</span> <span class="mi">2</span></div>



<div class="viewcode-block" id="ObjectClass">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.ObjectClass">[docs]</a>
<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ObjectClass</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	An ``ObjectClass`` is an enumeration and represents an object&#39;s class (``constant``, ``signal``, ...).</span>

<span class="sd">	In case no *object class* is defined, ``Default`` is used, so the *object class* is inferred from context.</span>
<span class="sd">	&quot;&quot;&quot;</span>

	<span class="n">Default</span> <span class="o">=</span>    <span class="mi">0</span>  <span class="c1">#: Object class not defined, thus it&#39;s context dependent.</span>
	<span class="n">Constant</span> <span class="o">=</span>   <span class="mi">1</span>  <span class="c1">#: Constant</span>
	<span class="n">Variable</span> <span class="o">=</span>   <span class="mi">2</span>  <span class="c1">#: Variable</span>
	<span class="n">Signal</span> <span class="o">=</span>     <span class="mi">3</span>  <span class="c1">#: Signal</span>
	<span class="n">File</span> <span class="o">=</span>       <span class="mi">4</span>  <span class="c1">#: File</span>
	<span class="n">Type</span> <span class="o">=</span>       <span class="mi">5</span>  <span class="c1">#: Type</span>
	<span class="c1"># FIXME: Package?</span>
	<span class="n">Procedure</span> <span class="o">=</span>  <span class="mi">6</span>  <span class="c1">#: Procedure</span>
	<span class="n">Function</span> <span class="o">=</span>   <span class="mi">7</span>  <span class="c1">#: Function</span>

<div class="viewcode-block" id="ObjectClass.__str__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.ObjectClass.__str__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats the object class.</span>

<span class="sd">		:return: Formatted object class.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;constant&quot;</span><span class="p">,</span> <span class="s2">&quot;variable&quot;</span><span class="p">,</span> <span class="s2">&quot;signal&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;procedure&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">)[</span><span class="n">cast</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>       <span class="c1"># TODO: check performance</span></div>
</div>



<div class="viewcode-block" id="DesignUnitKind">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.DesignUnitKind">[docs]</a>
<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DesignUnitKind</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	A ``DesignUnitKind`` is an enumeration and represents the kind of design unit (``Entity``, ``Architecture``, ...).</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">Context</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>                                                             <span class="c1">#: Context</span>
	<span class="n">Package</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>                                                             <span class="c1">#: Package</span>
	<span class="n">PackageBody</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>                                                         <span class="c1">#: Package Body</span>
	<span class="n">Entity</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>                                                              <span class="c1">#: Entity</span>
	<span class="n">Architecture</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>                                                        <span class="c1">#: Architecture</span>
	<span class="n">Configuration</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>                                                       <span class="c1">#: Configuration</span>

	<span class="n">Primary</span> <span class="o">=</span> <span class="n">Context</span> <span class="o">|</span> <span class="n">Configuration</span> <span class="o">|</span> <span class="n">Entity</span> <span class="o">|</span> <span class="n">Package</span>                         <span class="c1">#: List of primary design units.</span>
	<span class="n">Secondary</span> <span class="o">=</span> <span class="n">PackageBody</span> <span class="o">|</span> <span class="n">Architecture</span>                                       <span class="c1">#: List of secondary design units.</span>
	<span class="n">WithContext</span> <span class="o">=</span> <span class="n">Configuration</span> <span class="o">|</span> <span class="n">Package</span> <span class="o">|</span> <span class="n">Entity</span> <span class="o">|</span> <span class="n">PackageBody</span> <span class="o">|</span> <span class="n">Architecture</span>  <span class="c1">#: List of design units with a context.</span>
	<span class="n">WithDeclaredItems</span> <span class="o">=</span> <span class="n">Package</span> <span class="o">|</span> <span class="n">Entity</span> <span class="o">|</span> <span class="n">PackageBody</span> <span class="o">|</span> <span class="n">Architecture</span>            <span class="c1">#: List of design units having a declaration region.</span>

	<span class="n">All</span> <span class="o">=</span> <span class="n">Primary</span> <span class="o">|</span> <span class="n">Secondary</span>                                                    <span class="c1">#: List of all design units.</span></div>



<div class="viewcode-block" id="DependencyGraphVertexKind">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.DependencyGraphVertexKind">[docs]</a>
<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DependencyGraphVertexKind</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	A ``DependencyGraphVertexKind`` is an enumeration and represents the kind of vertex in the dependency graph.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">Document</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>       <span class="c1">#: A document (VHDL source file).</span>
	<span class="n">Library</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>        <span class="c1">#: A VHDL library.</span>

	<span class="n">Context</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>        <span class="c1">#: A context design unit.</span>
	<span class="n">Package</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>        <span class="c1">#: A package design unit.</span>
	<span class="n">PackageBody</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>    <span class="c1">#: A package body design unit.</span>
	<span class="n">Entity</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>         <span class="c1">#: A entity design unit.</span>
	<span class="n">Architecture</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>   <span class="c1">#: A architecture design unit.</span>
	<span class="n">Component</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>      <span class="c1">#: A VHDL component.</span>
	<span class="n">Configuration</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>  <span class="c1">#: A configuration design unit.</span></div>



<div class="viewcode-block" id="DependencyGraphEdgeKind">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.DependencyGraphEdgeKind">[docs]</a>
<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DependencyGraphEdgeKind</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	A ``DependencyGraphEdgeKind`` is an enumeration and represents the kind of edge in the dependency graph.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">Document</span> <span class="o">=</span>       <span class="n">auto</span><span class="p">()</span>
	<span class="n">Library</span> <span class="o">=</span>        <span class="n">auto</span><span class="p">()</span>
	<span class="n">Context</span> <span class="o">=</span>        <span class="n">auto</span><span class="p">()</span>
	<span class="n">Package</span> <span class="o">=</span>        <span class="n">auto</span><span class="p">()</span>
	<span class="n">Entity</span> <span class="o">=</span>         <span class="n">auto</span><span class="p">()</span>
	<span class="c1"># Architecture = auto()</span>
	<span class="n">Configuration</span> <span class="o">=</span>  <span class="n">auto</span><span class="p">()</span>
	<span class="n">Component</span> <span class="o">=</span>      <span class="n">auto</span><span class="p">()</span>

	<span class="n">DeclaredIn</span> <span class="o">=</span>     <span class="n">auto</span><span class="p">()</span>
	<span class="n">Order</span> <span class="o">=</span>          <span class="n">auto</span><span class="p">()</span>
	<span class="n">Reference</span> <span class="o">=</span>      <span class="n">auto</span><span class="p">()</span>
	<span class="n">Implementation</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Instantiation</span> <span class="o">=</span>  <span class="n">auto</span><span class="p">()</span>

	<span class="n">SourceFile</span> <span class="o">=</span>                 <span class="n">Document</span> <span class="o">|</span> <span class="n">DeclaredIn</span>
	<span class="n">CompileOrder</span> <span class="o">=</span>               <span class="n">Document</span> <span class="o">|</span> <span class="n">Order</span>

	<span class="n">LibraryClause</span> <span class="o">=</span>              <span class="n">Library</span> <span class="o">|</span> <span class="n">Reference</span>
	<span class="n">UseClause</span> <span class="o">=</span>                  <span class="n">Package</span> <span class="o">|</span> <span class="n">Reference</span>
	<span class="n">ContextReference</span> <span class="o">=</span>           <span class="n">Context</span> <span class="o">|</span> <span class="n">Reference</span>

	<span class="n">EntityImplementation</span> <span class="o">=</span>       <span class="n">Entity</span> <span class="o">|</span> <span class="n">Implementation</span>
	<span class="n">PackageImplementation</span> <span class="o">=</span>      <span class="n">Package</span> <span class="o">|</span> <span class="n">Implementation</span>

	<span class="n">EntityInstantiation</span> <span class="o">=</span>        <span class="n">Entity</span> <span class="o">|</span> <span class="n">Instantiation</span>
	<span class="n">ComponentInstantiation</span> <span class="o">=</span>     <span class="n">Component</span> <span class="o">|</span> <span class="n">Instantiation</span>
	<span class="n">ConfigurationInstantiation</span> <span class="o">=</span> <span class="n">Configuration</span> <span class="o">|</span> <span class="n">Instantiation</span></div>



<div class="viewcode-block" id="ObjectGraphVertexKind">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.ObjectGraphVertexKind">[docs]</a>
<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ObjectGraphVertexKind</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	A ``ObjectGraphVertexKind`` is an enumeration and represents the kind of vertex in the object graph.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">Type</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Subtype</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="n">Constant</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">DeferredConstant</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Variable</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Signal</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">File</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="n">Alias</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span></div>



<div class="viewcode-block" id="ObjectGraphEdgeKind">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.ObjectGraphEdgeKind">[docs]</a>
<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ObjectGraphEdgeKind</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	A ``ObjectGraphEdgeKind`` is an enumeration and represents the kind of edge in the object graph.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">BaseType</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Subtype</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="n">ReferenceInExpression</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span></div>



<div class="viewcode-block" id="Design">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design">[docs]</a>
<span class="nd">@export</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Design</span><span class="p">(</span><span class="n">ModelEntity</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	A ``Design`` represents set of VHDL libraries as well as all loaded and analysed source files (see :class:`~pyVHDLModel.Document`).</span>

<span class="sd">	It&#39;s the root of this code document-object-model (CodeDOM). It contains at least one VHDL library (see :class:`~pyVHDLModel.Library`). When the design is</span>
<span class="sd">	analysed (see :meth:`Analyze`), multiple graph data structures will be created and populated with vertices and edges. As a first result, the design&#39;s compile</span>
<span class="sd">	order and hierarchy can be iterated. As a second result, the design&#39;s *top-level* is identified and referenced from the design (see :attr:`TopLevel`).</span>

<span class="sd">	The *design* contains references to the following graphs:</span>

<span class="sd">	* :attr:`DependencyGraph`</span>
<span class="sd">	* :attr:`CompileOrderGraph`</span>
<span class="sd">	* :attr:`HierarchyGraph`</span>
<span class="sd">	* :attr:`ObjectGraph`</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">_name</span><span class="p">:</span>              <span class="n">Nullable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>         <span class="c1">#: Name of the design.</span>
	<span class="n">_allowBlackbox</span><span class="p">:</span>     <span class="nb">bool</span>                  <span class="c1">#: Allow blackboxes after linking the design.</span>
	<span class="n">_libraries</span><span class="p">:</span>         <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;Library&#39;</span><span class="p">]</span>  <span class="c1">#: List of all libraries defined for a design.</span>
	<span class="n">_documents</span><span class="p">:</span>         <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Document&#39;</span><span class="p">]</span>      <span class="c1">#: List of all documents loaded for a design.</span>
	<span class="n">_dependencyGraph</span><span class="p">:</span>   <span class="n">Graph</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>   <span class="c1">#: The graph of all dependencies in the designs.</span>
	<span class="n">_compileOrderGraph</span><span class="p">:</span> <span class="n">Graph</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>  <span class="c1">#: A graph derived from dependency graph containing the order of documents for compilation.</span>
	<span class="n">_hierarchyGraph</span><span class="p">:</span>    <span class="n">Graph</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>   <span class="c1">#: A graph derived from dependency graph containing the design hierarchy.</span>
	<span class="n">_objectGraph</span><span class="p">:</span>       <span class="n">Graph</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Obj</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>          <span class="c1">#: The graph of all types and objects in the design.</span>
	<span class="n">_toplevel</span><span class="p">:</span>          <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]</span>  <span class="c1">#: When computed, the toplevel design unit is cached in this field.</span>

<div class="viewcode-block" id="Design.__init__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.__init__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">name</span><span class="p">:</span> <span class="n">Nullable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">allowBlackbox</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize a VHDL design.</span>

<span class="sd">		:param allowBlackbox: Specify if blackboxes are allowed in this design.</span>
<span class="sd">		:param name:          Name of the design.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_allowBlackbox</span> <span class="o">=</span> <span class="n">allowBlackbox</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_documents</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_toplevel</span> <span class="o">=</span> <span class="kc">None</span></div>


	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Nullable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the design&#39;s name (:attr:`_name`).</span>

<span class="sd">		:returns: The name of the design.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

	<span class="nd">@property</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">AllowBlackbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to check if a design supports blackboxes (:attr:`_allowBlackbox`).</span>

<span class="sd">		:returns: If blackboxes are allowed.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowBlackbox</span>

	<span class="nd">@AllowBlackbox</span><span class="o">.</span><span class="n">setter</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">AllowBlackbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Nullable</span><span class="p">[</span><span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Property &#39;AllowBlackbox&#39; doesn&#39;t accept value &#39;None&#39;.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_allowBlackbox</span> <span class="o">=</span> <span class="n">value</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Libraries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;Library&#39;</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the dictionary of library names and VHDL libraries (:attr:`_libraries`).</span>

<span class="sd">		:returns: A dictionary of library names and VHDL libraries.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Documents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Document&#39;</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the list of all documents (VHDL source files) loaded for this design (:attr:`_documents`).</span>

<span class="sd">		:returns: A list of all documents.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_documents</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">CompileOrderGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the compile-order graph (:attr:`_compileOrderGraph`).</span>

<span class="sd">		:returns: Reference to the compile-order graph.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">DependencyGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the dependency graph (:attr:`_dependencyGraph`).</span>

<span class="sd">		:returns: Reference to the dependency graph.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">HierarchyGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the hierarchy graph (:attr:`_hierarchyGraph`).</span>

<span class="sd">		:returns: Reference to the hierarchy graph.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">ObjectGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the object graph (:attr:`_objectGraph`).</span>

<span class="sd">		:returns: Reference to the object graph.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">TopLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the design&#39;s *top-level* (:attr:`_toplevel`).</span>

<span class="sd">		When called the first time, the hierarchy graph is checked for its root elements. When there is only one root element in the graph, a new field ``toplevel``</span>
<span class="sd">		is added to :attr:`_hierarchyGraph` referencing that single element. In addition, the result is cached in :attr:`_toplevel`.</span>

<span class="sd">		:returns:                   Reference to the design&#39;s *top-level*.</span>
<span class="sd">		:raises VHDLModelException: If the hierarchy graph is not yet computed from dependency graph.</span>
<span class="sd">		:raises VHDLModelException: If there is more than one *top-level*.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Check for cached result</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_toplevel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_toplevel</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="o">.</span><span class="n">EdgeCount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hierarchy is not yet computed from dependency graph.&quot;</span><span class="p">)</span>

		<span class="n">roots</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="o">.</span><span class="n">IterateRoots</span><span class="p">())</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
			<span class="n">toplevel</span> <span class="o">=</span> <span class="n">roots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="p">[</span><span class="s2">&quot;toplevel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">toplevel</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_toplevel</span> <span class="o">=</span> <span class="n">toplevel</span><span class="o">.</span><span class="n">Value</span>

			<span class="k">return</span> <span class="n">toplevel</span><span class="o">.</span><span class="n">Value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found more than one toplevel: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Design.LoadStdLibrary">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.LoadStdLibrary">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">LoadStdLibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Library&#39;</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Load the predefined VHDL library ``std`` into the design.</span>

<span class="sd">		This will create a virtual source code file ``std.vhdl`` and register VHDL design units of library ``std`` to that file.</span>

<span class="sd">		:returns: The library object of library ``std``.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.STD</span><span class="w"> </span><span class="kn">import</span> <span class="n">Std</span>

		<span class="n">doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;std.vhdl&quot;</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

		<span class="n">library</span> <span class="o">=</span> <span class="n">Std</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">():</span>
			<span class="n">doc</span><span class="o">.</span><span class="n">_AddDesignUnit</span><span class="p">(</span><span class="n">designUnit</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">AddLibrary</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">library</span></div>


<div class="viewcode-block" id="Design.LoadIEEELibrary">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.LoadIEEELibrary">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">LoadIEEELibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flavor</span><span class="p">:</span> <span class="n">Nullable</span><span class="p">[</span><span class="n">IEEEFlavor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Library&#39;</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Load the predefined VHDL library ``ieee`` into the design.</span>

<span class="sd">		This will create a virtual source code file ``ieee.vhdl`` and register VHDL design units of library ``ieee`` to that file.</span>

<span class="sd">		:param flavor: Select the IEEE library flavor: IEEE, Synopsys, MentorGraphics.</span>
<span class="sd">		:returns:      The library object of library ``ieee``.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.IEEE</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ieee</span>

		<span class="n">doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;ieee.vhdl&quot;</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

		<span class="n">library</span> <span class="o">=</span> <span class="n">Ieee</span><span class="p">(</span><span class="n">flavor</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">():</span>
			<span class="n">doc</span><span class="o">.</span><span class="n">_AddDesignUnit</span><span class="p">(</span><span class="n">designUnit</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">AddLibrary</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">library</span></div>


<div class="viewcode-block" id="Design.AddLibrary">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.AddLibrary">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">AddLibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">library</span><span class="p">:</span> <span class="s1">&#39;Library&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add a VHDL library to the design.</span>

<span class="sd">		Ensure the libraries name doesn&#39;t collide with existing libraries in the design. |br|</span>
<span class="sd">		If ok, set the libraries parent reference to the design.</span>

<span class="sd">		:param library:                                Library object to loaded.</span>
<span class="sd">		:raises LibraryExistsInDesignError:            If the library already exists in the design.</span>
<span class="sd">		:raises LibraryRegisteredToForeignDesignError: If library is already used by a different design.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">libraryIdentifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">LibraryExistsInDesignError</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">library</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">LibraryRegisteredToForeignDesignError</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
		<span class="n">library</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Design.GetLibrary">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.GetLibrary">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">GetLibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">libraryName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Library&#39;</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Return an (existing) VHDL library object of name ``libraryName``.</span>

<span class="sd">		If the requested VHDL library doesn&#39;t exist, a new VHDL library with that name will be created.</span>

<span class="sd">		:param libraryName: Name of the requested VHDL library.</span>
<span class="sd">		:returns:           The VHDL library object.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">libraryName</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="n">lib</span> <span class="o">=</span> <span class="n">Library</span><span class="p">(</span><span class="n">libraryName</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">lib</span>
			<span class="n">lib</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
			<span class="k">return</span> <span class="n">lib</span></div>


	<span class="c1"># TODO: allow overloaded parameter library to be str?</span>
<div class="viewcode-block" id="Design.AddDocument">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.AddDocument">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">AddDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">:</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="n">library</span><span class="p">:</span> <span class="s1">&#39;Library&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add a document (VHDL source file) to the design and register all embedded design units to the given VHDL library.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all entities in the document</span>

<span class="sd">		   1. Check if entity name might exist in target library.</span>
<span class="sd">		   2. Add entity to library and update library membership.</span>

<span class="sd">		2. Iterate all architectures in the document</span>

<span class="sd">		   1. Check if architecture name might exist in target library.</span>
<span class="sd">		   2. Add architecture to library and update library membership.</span>

<span class="sd">		3. Iterate all packages in the document</span>

<span class="sd">		   1. Check if package name might exist in target library.</span>
<span class="sd">		   2. Add package to library and update library membership.</span>

<span class="sd">		4. Iterate all package bodies in the document</span>

<span class="sd">		   1. Check if package body name might exist in target library.</span>
<span class="sd">		   2. Add package body to library and update library membership.</span>

<span class="sd">		5. Iterate all configurations in the document</span>

<span class="sd">		   1. Check if configuration name might exist in target library.</span>
<span class="sd">		   2. Add configuration to library and update library membership.</span>

<span class="sd">		6. Iterate all contexts in the document</span>

<span class="sd">		   1. Check if context name might exist in target library.</span>
<span class="sd">		   2. Add context to library and update library membership.</span>

<span class="sd">		:param document:                           The VHDL source code file.</span>
<span class="sd">		:param library:                            The VHDL library used to register the embedded design units to.</span>
<span class="sd">		:raises LibraryNotRegisteredError:         If the given VHDL library is not a library in the design.</span>
<span class="sd">		:raises EntityExistsInLibraryError:        If the processed entity&#39;s name is already existing in the VHDL library.</span>
<span class="sd">		:raises ArchitectureExistsInLibraryError:  If the processed architecture&#39;s name is already existing in the VHDL library.</span>
<span class="sd">		:raises PackageExistsInLibraryError:       If the processed package&#39;s name is already existing in the VHDL library.</span>
<span class="sd">		:raises PackageBodyExistsError:            If the processed package body&#39;s name is already existing in the VHDL library.</span>
<span class="sd">		:raises ConfigurationExistsInLibraryError: If the processed configuration&#39;s name is already existing in the VHDL library.</span>
<span class="sd">		:raises ContextExistsInLibraryError:       If the processed context&#39;s name is already existing in the VHDL library.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># FIXME: this checks for the library name, but not the object</span>
		<span class="c1"># should the libraries parent be checked too?</span>
		<span class="k">if</span> <span class="n">library</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">LibraryNotRegisteredError</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_documents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
		<span class="n">document</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

		<span class="k">for</span> <span class="n">entityIdentifier</span><span class="p">,</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">entityIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">EntityExistsInLibraryError</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">entityIdentifier</span><span class="p">,</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">architecturesPerEntity</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span>
				<span class="k">for</span> <span class="n">architectureIdentifier</span><span class="p">,</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
					<span class="k">if</span> <span class="n">architectureIdentifier</span> <span class="ow">in</span> <span class="n">architecturesPerEntity</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">ArchitectureExistsInLibraryError</span><span class="p">(</span><span class="n">architecture</span><span class="p">,</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">],</span> <span class="n">library</span><span class="p">)</span>

					<span class="n">architecturesPerEntity</span><span class="p">[</span><span class="n">architectureIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">architecture</span>
					<span class="n">architecture</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>
			<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
				<span class="n">architecturesPerEntity</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
				<span class="n">library</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">architecturesPerEntity</span>

				<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architecturesPerEntity</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
					<span class="n">architecture</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">packageIdentifier</span><span class="p">,</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">packageIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">PackageExistsInLibraryError</span><span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>
			<span class="n">package</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">packageBodyIdentifier</span><span class="p">,</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">packageBodyIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">PackageBodyExistsError</span><span class="p">(</span><span class="n">packageBody</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">[</span><span class="n">packageBodyIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">packageBody</span>
			<span class="n">packageBody</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">configurationIdentifier</span><span class="p">,</span> <span class="n">configuration</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">configurationIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_configurations</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">ConfigurationExistsInLibraryError</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_configurations</span><span class="p">[</span><span class="n">configurationIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">configuration</span>
			<span class="n">configuration</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">contextIdentifier</span><span class="p">,</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_contexts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">contextIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_contexts</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">ContextExistsInLibraryError</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_contexts</span><span class="p">[</span><span class="n">contextIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">context</span>
			<span class="n">context</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span></div>


<div class="viewcode-block" id="Design.IterateDesignUnits">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.IterateDesignUnits">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IterateDesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">DesignUnitKind</span> <span class="o">=</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">All</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Iterate all design units in the design.</span>

<span class="sd">		A union of :class:`DesignUnitKind` values can be given to filter the returned result for suitable design units.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all VHDL libraries.</span>

<span class="sd">		   1. Iterate all contexts in that library.</span>
<span class="sd">		   2. Iterate all packages in that library.</span>
<span class="sd">		   3. Iterate all package bodies in that library.</span>
<span class="sd">		   4. Iterate all entites in that library.</span>
<span class="sd">		   5. Iterate all architectures in that library.</span>
<span class="sd">		   6. Iterate all configurations in that library.</span>

<span class="sd">		:param filter: An enumeration with possibly multiple flags to filter the returned design units.</span>
<span class="sd">		:returns:      A generator to iterate all matched design units in the design.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`pyVHDLModel.Library.IterateDesignUnits`</span>
<span class="sd">		     Iterate all design units in the library.</span>
<span class="sd">		   :meth:`pyVHDLModel.Document.IterateDesignUnits`</span>
<span class="sd">		     Iterate all design units in the document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="k">yield from</span> <span class="n">library</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span></div>


<div class="viewcode-block" id="Design.Analyze">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.Analyze">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">Analyze</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Analyze the whole design.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Analyze dependencies of design units. |br|</span>
<span class="sd">		   This will also yield the design hierarchy and the compiler order.</span>
<span class="sd">		2. Analyze dependencies of types and objects.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`AnalyzeDependencies`</span>
<span class="sd">		     Analyze the dependencies of design units.</span>

<span class="sd">		   :meth:`AnalyzeObjects`</span>
<span class="sd">		     Analyze the dependencies of types and objects.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">AnalyzeDependencies</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">AnalyzeObjects</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.AnalyzeDependencies">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.AnalyzeDependencies">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">AnalyzeDependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Analyze the dependencies of design units.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Create all vertices of the dependency graph by iterating all design units in all libraries. |br|</span>
<span class="sd">		   |rarr| :meth:`CreateDependencyGraph`</span>
<span class="sd">		2. Create the compile order graph. |br|</span>
<span class="sd">		   |rarr| :meth:`CreateCompileOrderGraph`</span>
<span class="sd">		3. Index all packages. |br|</span>
<span class="sd">		   |rarr| :meth:`IndexPackages`</span>
<span class="sd">		4. Index all architectures. |br|</span>
<span class="sd">		   |rarr| :meth:`IndexArchitectures`</span>
<span class="sd">		5. Link all contexts |br|</span>
<span class="sd">		   |rarr| :meth:`LinkContexts`</span>
<span class="sd">		6. Link all architectures. |br|</span>
<span class="sd">		   |rarr| :meth:`LinkArchitectures`</span>
<span class="sd">		7. Link all package bodies. |br|</span>
<span class="sd">		   |rarr| :meth:`LinkPackageBodies`</span>
<span class="sd">		8. Link all library references. |br|</span>
<span class="sd">		   |rarr| :meth:`LinkLibraryReferences`</span>
<span class="sd">		9. Link all package references. |br|</span>
<span class="sd">		   |rarr| :meth:`LinkPackageReferences`</span>
<span class="sd">		10. Link all context references. |br|</span>
<span class="sd">		    |rarr| :meth:`LinkContextReferences`</span>
<span class="sd">		11. Link all components. |br|</span>
<span class="sd">		    |rarr| :meth:`LinkComponents`</span>
<span class="sd">		12. Link all instantiations. |br|</span>
<span class="sd">		    |rarr| :meth:`LinkInstantiations`</span>
<span class="sd">		13. Create the hierarchy graph. |br|</span>
<span class="sd">		    |rarr| :meth:`CreateHierarchyGraph`</span>
<span class="sd">		14. Compute the compile order. |br|</span>
<span class="sd">		    |rarr| :meth:`ComputeCompileOrder`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">CreateDependencyGraph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">CreateCompileOrderGraph</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">IndexPackages</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">IndexArchitectures</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">LinkContexts</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkArchitectures</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkPackageBodies</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkLibraryReferences</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkPackageReferences</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkContextReferences</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">LinkComponents</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkInstantiations</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">CreateHierarchyGraph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ComputeCompileOrder</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.AnalyzeObjects">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.AnalyzeObjects">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">AnalyzeObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Analyze the dependencies of types and objects.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Index all entities. |br|</span>
<span class="sd">		   |rarr| :meth:`IndexEntities`</span>
<span class="sd">		2. Index all package bodies. |br|</span>
<span class="sd">		   |rarr| :meth:`IndexPackageBodies`</span>
<span class="sd">		3. Import objects. |br|</span>
<span class="sd">		   |rarr| :meth:`ImportObjects`</span>
<span class="sd">		4. Create the type and object graph. |br|</span>
<span class="sd">		   |rarr| :meth:`CreateTypeAndObjectGraph`</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">IndexEntities</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">IndexPackageBodies</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">ImportObjects</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">CreateTypeAndObjectGraph</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.CreateDependencyGraph">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.CreateDependencyGraph">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">CreateDependencyGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create all vertices of the dependency graph by iterating all design units in all libraries.</span>

<span class="sd">		This method will purely create a sea of vertices without any linking between vertices. The edges will be created later by other methods. |br|</span>
<span class="sd">		See :meth:`AnalyzeDependencies` for these methods and their algorithmic order.</span>

<span class="sd">		Each vertex has the following properties:</span>

<span class="sd">		* The vertex&#39; ID is the design unit&#39;s identifier.</span>
<span class="sd">		* The vertex&#39; value references the design unit.</span>
<span class="sd">		* A key-value-pair called ``kind`` denotes the vertex&#39;s kind as an enumeration value of type :class:`DependencyGraphVertexKind`.</span>
<span class="sd">		* A key-value-pair called ``predefined`` denotes if the referenced design unit is a predefined language entity.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all libraries in the design.</span>

<span class="sd">		   * Create a vertex for that library and reference the library by the vertex&#39; value field. |br|</span>
<span class="sd">		     In return, set the library&#39;s :attr:`~pyVHDLModel.Library._dependencyVertex` field to reference the created vertex.</span>

<span class="sd">		   1. Iterate all contexts in that library.</span>

<span class="sd">		      * Create a vertex for that context and reference the context by the vertex&#39; value field. |br|</span>
<span class="sd">		        In return, set the context&#39;s :attr:`~pyVHDLModel.DesignUnit.Context._dependencyVertex` field to reference the created vertex.</span>

<span class="sd">		   2. Iterate all packages in that library.</span>

<span class="sd">		      * Create a vertex for that package and reference the package by the vertex&#39; value field. |br|</span>
<span class="sd">		        In return, set the package&#39;s :attr:`~pyVHDLModel.DesignUnit.Package._dependencyVertex` field to reference the created vertex.</span>

<span class="sd">		   3. Iterate all package bodies in that library.</span>

<span class="sd">		      * Create a vertex for that package body and reference the package body by the vertex&#39; value field. |br|</span>
<span class="sd">		        In return, set the package body&#39;s :attr:`~pyVHDLModel.DesignUnit.PackageBody._dependencyVertex` field to reference the created vertex.</span>

<span class="sd">		   4. Iterate all entities in that library.</span>

<span class="sd">		      * Create a vertex for that entity and reference the entity by the vertex&#39; value field. |br|</span>
<span class="sd">		        In return, set the entity&#39;s :attr:`~pyVHDLModel.DesignUnit.Entity._dependencyVertex` field to reference the created vertex.</span>

<span class="sd">		   5. Iterate all architectures in that library.</span>

<span class="sd">		      * Create a vertex for that architecture and reference the architecture by the vertex&#39; value field. |br|</span>
<span class="sd">		        In return, set the architecture&#39;s :attr:`~pyVHDLModel.DesignUnit.Architecture._dependencyVertex` field to reference the created vertex.</span>

<span class="sd">		   6. Iterate all configurations in that library.</span>

<span class="sd">		      * Create a vertex for that configuration and reference the configuration by the vertex&#39; value field. |br|</span>
<span class="sd">		        In return, set the configuration&#39;s :attr:`~pyVHDLModel.DesignUnit.Configuration._dependencyVertex` field to reference the created vertex.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">predefinedLibraries</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;ieee&quot;</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">libraryIdentifier</span><span class="p">,</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">library</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
			<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Library</span>
			<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">libraryIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
			<span class="n">library</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">contextIdentifier</span><span class="p">,</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_contexts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">contextIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Context</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">context</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">packageIdentifier</span><span class="p">,</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">packageIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">package</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Package</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">package</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">packageBodyIdentifier</span><span class="p">,</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">packageBodyIdentifier</span><span class="si">}</span><span class="s2">(body)&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">packageBody</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">PackageBody</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">packageBody</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">packageBody</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">entityIdentifier</span><span class="p">,</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">entityIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Entity</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">entity</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">entityIdentifier</span><span class="p">,</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="k">for</span> <span class="n">architectureIdentifier</span><span class="p">,</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
					<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">entityIdentifier</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">architectureIdentifier</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">architecture</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
					<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Architecture</span>
					<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
					<span class="n">architecture</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">configurationIdentifier</span><span class="p">,</span> <span class="n">configuration</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">configurationIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">configuration</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Configuration</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">configuration</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">configuration</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span></div>


<div class="viewcode-block" id="Design.CreateCompileOrderGraph">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.CreateCompileOrderGraph">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">CreateCompileOrderGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create a compile-order graph with bidirectional references to the dependency graph.</span>

<span class="sd">		Add vertices representing a document (VHDL source file) to the dependency graph. Each &quot;document&quot; vertex in dependency graph is copied into the compile-order</span>
<span class="sd">		graph and bidirectionally referenced.</span>

<span class="sd">		In addition, each vertex of a corresponding design unit in a document is linked to the vertex representing that document to express the design unit in</span>
<span class="sd">		document relationship.</span>

<span class="sd">		Each added vertex has the following properties:</span>

<span class="sd">		* The vertex&#39; ID is the document&#39;s filename.</span>
<span class="sd">		* The vertex&#39; value references the document.</span>
<span class="sd">		* A key-value-pair called ``kind`` denotes the vertex&#39;s kind as an enumeration value of type :class:`DependencyGraphVertexKind`.</span>
<span class="sd">		* A key-value-pair called ``predefined`` does not exist.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all documents in the design.</span>

<span class="sd">		   * Create a vertex for that document and reference the document by the vertex&#39; value field. |br|</span>
<span class="sd">		     In return, set the documents&#39;s :attr:`~pyVHDLModel.Document._dependencyVertex` field to reference the created vertex.</span>
<span class="sd">		   * Copy the vertex from dependency graph to compile-order graph and link both vertices bidirectionally. |br|</span>
<span class="sd">		     In addition, set the documents&#39;s :attr:`~pyVHDLModel.Document._dependencyVertex` field to reference the copied vertex.</span>

<span class="sd">		     * Add a key-value-pair called ``compileOrderVertex`` to the dependency graph&#39;s vertex.</span>
<span class="sd">		     * Add a key-value-pair called ``dependencyVertex`` to the compiler-order graph&#39;s vertex.</span>

<span class="sd">		   1. Iterate the documents design units and create an edge from the design unit&#39;s corresponding dependency vertex to the documents corresponding</span>
<span class="sd">		      dependency vertex. This expresses a &quot;design unit is located in document&quot; relation.</span>

<span class="sd">		      * Add a key-value-pair called `kind`` denoting the edge&#39;s kind as an enumeration value of type :class:`DependencyGraphEdgeKind`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_documents</span><span class="p">:</span>
			<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="n">document</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">document</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
			<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Document</span>
			<span class="n">document</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="n">compilerOrderVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span><span class="o">.</span><span class="n">Copy</span><span class="p">(</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span><span class="p">,</span>
				<span class="n">copyDict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="n">linkingKeyToOriginalVertex</span><span class="o">=</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">,</span>
				<span class="n">linkingKeyFromOriginalVertex</span><span class="o">=</span><span class="s2">&quot;compileOrderVertex&quot;</span>
			<span class="p">)</span>
			<span class="n">document</span><span class="o">.</span><span class="n">_compileOrderVertex</span> <span class="o">=</span> <span class="n">compilerOrderVertex</span>

			<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_designUnits</span><span class="p">:</span>
				<span class="n">edge</span> <span class="o">=</span> <span class="n">dependencyVertex</span><span class="o">.</span><span class="n">EdgeFromVertex</span><span class="p">(</span><span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
				<span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">SourceFile</span></div>


	<span class="k">def</span><span class="w"> </span><span class="nf">ImportObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">_ImportObjects</span><span class="p">(</span><span class="n">package</span><span class="p">:</span> <span class="n">Package</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
			<span class="kn">from</span><span class="w"> </span><span class="nn">pyVHDLModel.Declaration</span><span class="w"> </span><span class="kn">import</span> <span class="n">AttributeSpecification</span>

			<span class="k">for</span> <span class="n">referencedLibrary</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">for</span> <span class="n">referencedPackage</span> <span class="ow">in</span> <span class="n">referencedLibrary</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
					<span class="k">for</span> <span class="n">declaredItem</span> <span class="ow">in</span> <span class="n">referencedPackage</span><span class="o">.</span><span class="n">_declaredItems</span><span class="p">:</span>
						<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">declaredItem</span><span class="p">,</span> <span class="n">MultipleNamedEntityMixin</span><span class="p">):</span>
							<span class="k">for</span> <span class="n">normalizedIdentifier</span> <span class="ow">in</span> <span class="n">declaredItem</span><span class="o">.</span><span class="n">_normalizedIdentifiers</span><span class="p">:</span>
								<span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">_elements</span><span class="p">[</span><span class="n">normalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">declaredItem</span>
						<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">declaredItem</span><span class="p">,</span> <span class="n">NamedEntityMixin</span><span class="p">):</span>
							<span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">_elements</span><span class="p">[</span><span class="n">declaredItem</span><span class="o">.</span><span class="n">_normalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">declaredItem</span>
						<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">declaredItem</span><span class="p">,</span> <span class="n">AttributeSpecification</span><span class="p">):</span>
							<span class="c1"># FIXME: actually, this is not a declared item, but a application of an attribute to named entities</span>
							<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attribute specification.&quot;</span><span class="p">))</span>

						<span class="k">else</span><span class="p">:</span>
							<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected declared item.&quot;</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">libraryName</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;ieee&quot;</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetLibrary</span><span class="p">(</span><span class="n">libraryName</span><span class="p">)</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span><span class="p">):</span>  <span class="c1"># type: Package</span>
				<span class="n">_ImportObjects</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDocumentsInCompileOrder</span><span class="p">():</span>
			<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span><span class="p">):</span>  <span class="c1"># type: Package</span>
				<span class="n">_ImportObjects</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">CreateTypeAndObjectGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">_HandlePackage</span><span class="p">(</span><span class="n">package</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">packagePrefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">package</span><span class="o">.</span><span class="n">Library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">package</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="si">}</span><span class="s2">&quot;</span>

			<span class="k">for</span> <span class="n">deferredConstant</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_deferredConstants</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deferred Constant: </span><span class="si">{</span><span class="n">deferredConstant</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">deferredConstantVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span>
					<span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">packagePrefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">deferredConstant</span><span class="o">.</span><span class="n">NormalizedIdentifiers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
					<span class="n">value</span><span class="o">=</span><span class="n">deferredConstant</span><span class="p">,</span>
					<span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span>
				<span class="p">)</span>
				<span class="n">deferredConstantVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphVertexKind</span><span class="o">.</span><span class="n">DeferredConstant</span>
				<span class="n">deferredConstant</span><span class="o">.</span><span class="n">_objectVertex</span> <span class="o">=</span> <span class="n">deferredConstantVertex</span>

			<span class="k">for</span> <span class="n">constant</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_constants</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Constant: </span><span class="si">{</span><span class="n">constant</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">constantVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span>
					<span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">packagePrefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">constant</span><span class="o">.</span><span class="n">NormalizedIdentifiers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
					<span class="n">value</span><span class="o">=</span><span class="n">constant</span><span class="p">,</span>
					<span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span>
				<span class="p">)</span>
				<span class="n">constantVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphVertexKind</span><span class="o">.</span><span class="n">Constant</span>
				<span class="n">constant</span><span class="o">.</span><span class="n">_objectVertex</span> <span class="o">=</span> <span class="n">constantVertex</span>

			<span class="k">for</span> <span class="nb">type</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_types</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Type: </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">typeVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span>
					<span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">packagePrefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="nb">type</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
					<span class="n">value</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
					<span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span>
				<span class="p">)</span>
				<span class="n">typeVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphVertexKind</span><span class="o">.</span><span class="n">Type</span>
				<span class="nb">type</span><span class="o">.</span><span class="n">_objectVertex</span> <span class="o">=</span> <span class="n">typeVertex</span>

			<span class="k">for</span> <span class="n">subtype</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_subtypes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subtype: </span><span class="si">{</span><span class="n">subtype</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">subtypeVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span>
					<span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">packagePrefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">subtype</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
					<span class="n">value</span><span class="o">=</span><span class="n">subtype</span><span class="p">,</span>
					<span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span>
				<span class="p">)</span>
				<span class="n">subtypeVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphVertexKind</span><span class="o">.</span><span class="n">Subtype</span>
				<span class="n">subtype</span><span class="o">.</span><span class="n">_objectVertex</span> <span class="o">=</span> <span class="n">subtypeVertex</span>

			<span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_functions</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function: </span><span class="si">{</span><span class="n">function</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">functionVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span>
					<span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">packagePrefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">function</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
					<span class="n">value</span><span class="o">=</span><span class="n">function</span><span class="p">,</span>
					<span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span>
				<span class="p">)</span>
				<span class="n">functionVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphVertexKind</span><span class="o">.</span><span class="n">Function</span>
				<span class="n">function</span><span class="o">.</span><span class="n">_objectVertex</span> <span class="o">=</span> <span class="n">functionVertex</span>

			<span class="k">for</span> <span class="n">procedure</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_procedures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Procedure: </span><span class="si">{</span><span class="n">procedure</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">procedureVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span>
					<span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">packagePrefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">procedure</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
					<span class="n">value</span><span class="o">=</span><span class="n">procedure</span><span class="p">,</span>
					<span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span>
				<span class="p">)</span>
				<span class="n">procedureVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphVertexKind</span><span class="o">.</span><span class="n">Function</span>
				<span class="n">procedure</span><span class="o">.</span><span class="n">_objectVertex</span> <span class="o">=</span> <span class="n">procedureVertex</span>

			<span class="k">for</span> <span class="n">signal</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_signals</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signal: </span><span class="si">{</span><span class="n">signal</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">signalVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span>
					<span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">packagePrefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">signal</span><span class="o">.</span><span class="n">NormalizedIdentifiers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
					<span class="n">value</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
					<span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_objectGraph</span>
				<span class="p">)</span>
				<span class="n">signalVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphVertexKind</span><span class="o">.</span><span class="n">Signal</span>
				<span class="n">signal</span><span class="o">.</span><span class="n">_objectVertex</span> <span class="o">=</span> <span class="n">signalVertex</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">_LinkSymbolsInExpression</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">namespace</span><span class="p">:</span> <span class="n">Namespace</span><span class="p">,</span> <span class="n">typeVertex</span><span class="p">:</span> <span class="n">Vertex</span><span class="p">):</span>
			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">UnaryExpression</span><span class="p">):</span>
				<span class="n">_LinkSymbolsInExpression</span><span class="p">(</span><span class="n">expression</span><span class="o">.</span><span class="n">Operand</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">typeVertex</span><span class="p">)</span>
			<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">BinaryExpression</span><span class="p">):</span>
				<span class="n">_LinkSymbolsInExpression</span><span class="p">(</span><span class="n">expression</span><span class="o">.</span><span class="n">LeftOperand</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">typeVertex</span><span class="p">)</span>
				<span class="n">_LinkSymbolsInExpression</span><span class="p">(</span><span class="n">expression</span><span class="o">.</span><span class="n">RightOperand</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">typeVertex</span><span class="p">)</span>
			<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">TernaryExpression</span><span class="p">):</span>
				<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Handling of ternary expression.&quot;</span><span class="p">))</span>
			<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">SimpleObjectOrFunctionCallSymbol</span><span class="p">):</span>
				<span class="n">obj</span> <span class="o">=</span> <span class="n">namespace</span><span class="o">.</span><span class="n">FindObject</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
				<span class="n">expression</span><span class="o">.</span><span class="n">_reference</span> <span class="o">=</span> <span class="n">obj</span>

				<span class="n">edge</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_objectVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">typeVertex</span><span class="p">)</span>
				<span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphEdgeKind</span><span class="o">.</span><span class="n">ReferenceInExpression</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unhandled else-branch&quot;</span><span class="p">))</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">_LinkItems</span><span class="p">(</span><span class="n">package</span><span class="p">:</span> <span class="n">Package</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_declaredItems</span><span class="p">:</span>
				<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Constant</span><span class="p">):</span>
					<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;constant: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">DeferredConstant</span><span class="p">):</span>
					<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;deferred constant: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Signal</span><span class="p">):</span>
					<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;signal: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">IntegerType</span><span class="p">):</span>
					<span class="n">typeNode</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_objectVertex</span>

					<span class="n">_LinkSymbolsInExpression</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">Range</span><span class="o">.</span><span class="n">LeftBound</span><span class="p">,</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="p">,</span> <span class="n">typeNode</span><span class="p">)</span>
					<span class="n">_LinkSymbolsInExpression</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">Range</span><span class="o">.</span><span class="n">RightBound</span><span class="p">,</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="p">,</span> <span class="n">typeNode</span><span class="p">)</span>
				<span class="c1"># elif isinstance(item, FloatingType):</span>
				<span class="c1"># 	print(f&quot;signal: {item}&quot;)</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PhysicalType</span><span class="p">):</span>
					<span class="n">typeNode</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_objectVertex</span>

					<span class="n">_LinkSymbolsInExpression</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">Range</span><span class="o">.</span><span class="n">LeftBound</span><span class="p">,</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="p">,</span> <span class="n">typeNode</span><span class="p">)</span>
					<span class="n">_LinkSymbolsInExpression</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">Range</span><span class="o">.</span><span class="n">RightBound</span><span class="p">,</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="p">,</span> <span class="n">typeNode</span><span class="p">)</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ArrayType</span><span class="p">):</span>
					<span class="c1"># Resolve dimensions</span>
					<span class="k">for</span> <span class="n">dimension</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">_dimensions</span><span class="p">:</span>
						<span class="n">subtype</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">FindSubtype</span><span class="p">(</span><span class="n">dimension</span><span class="p">)</span>
						<span class="n">dimension</span><span class="o">.</span><span class="n">_reference</span> <span class="o">=</span> <span class="n">subtype</span>

						<span class="n">edge</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_objectVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">subtype</span><span class="o">.</span><span class="n">_objectVertex</span><span class="p">)</span>
						<span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphEdgeKind</span><span class="o">.</span><span class="n">Subtype</span>

					<span class="c1"># Resolve element subtype</span>
					<span class="n">subtype</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">FindSubtype</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">_elementType</span><span class="p">)</span>
					<span class="n">item</span><span class="o">.</span><span class="n">_elementType</span><span class="o">.</span><span class="n">_reference</span> <span class="o">=</span> <span class="n">subtype</span>

					<span class="n">edge</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_objectVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">subtype</span><span class="o">.</span><span class="n">_objectVertex</span><span class="p">)</span>
					<span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphEdgeKind</span><span class="o">.</span><span class="n">Subtype</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">RecordType</span><span class="p">):</span>
					<span class="c1"># Resolve each elements subtype</span>
					<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
						<span class="n">subtype</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">FindSubtype</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">_subtype</span><span class="p">)</span>
						<span class="n">element</span><span class="o">.</span><span class="n">_subtype</span><span class="o">.</span><span class="n">_reference</span> <span class="o">=</span> <span class="n">subtype</span>

						<span class="n">edge</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_objectVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">subtype</span><span class="o">.</span><span class="n">_objectVertex</span><span class="p">)</span>
						<span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectGraphEdgeKind</span><span class="o">.</span><span class="n">Subtype</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;not handled: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">libraryName</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;ieee&quot;</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetLibrary</span><span class="p">(</span><span class="n">libraryName</span><span class="p">)</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span><span class="p">):</span>  <span class="c1"># type: Package</span>
				<span class="n">_HandlePackage</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
				<span class="n">_LinkItems</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDocumentsInCompileOrder</span><span class="p">():</span>
			<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span><span class="p">):</span>  <span class="c1"># type: Package</span>
				<span class="n">_HandlePackage</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
				<span class="n">_LinkItems</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>

<div class="viewcode-block" id="Design.LinkContexts">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.LinkContexts">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">LinkContexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Resolves and links all items (library clauses, use clauses and nested context references) in contexts.</span>

<span class="sd">		It iterates all contexts in the design. Therefore, the library of the context is used as the working library. By</span>
<span class="sd">		default, the working library is implicitly referenced in :data:`_referencedLibraries`. In addition, a new empty</span>
<span class="sd">		dictionary is created in :data:`_referencedPackages` and :data:`_referencedContexts` for that working library.</span>

<span class="sd">		At first, all library clauses are resolved (a library clause my have multiple library reference symbols). For each</span>
<span class="sd">		referenced library an entry in :data:`_referencedLibraries` is generated and new empty dictionaries in</span>
<span class="sd">		:data:`_referencedPackages` and :data:`_referencedContexts` for that working library. In addition, a vertex in the</span>
<span class="sd">		dependency graph is added for that relationship.</span>

<span class="sd">		At second, all use clauses are resolved (a use clause my have multiple package member reference symbols). For each</span>
<span class="sd">		referenced package,</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Context</span><span class="p">):</span>  <span class="c1"># type: Context</span>
			<span class="c1"># Create entries in _referenced*** for the current working library under its real name.</span>
			<span class="n">workingLibrary</span><span class="p">:</span> <span class="n">Library</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">Library</span>
			<span class="n">libraryNormalizedIdentifier</span> <span class="o">=</span> <span class="n">workingLibrary</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>

			<span class="n">context</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span>
			<span class="n">context</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
			<span class="n">context</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

			<span class="c1"># Process all library clauses</span>
			<span class="k">for</span> <span class="n">libraryReference</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">_libraryReferences</span><span class="p">:</span>
				<span class="c1"># A library clause can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">libraryName</span> <span class="ow">in</span> <span class="n">libraryReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">libraryNormalizedIdentifier</span> <span class="o">=</span> <span class="n">libraryName</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">ReferencedLibraryNotExistingError</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">libraryName</span><span class="p">)</span>
						<span class="c1"># TODO: add position to these messages</span>

					<span class="n">libraryName</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

					<span class="n">context</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">context</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="n">context</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="c1"># TODO: warn duplicate library reference</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">library</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">libraryReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">LibraryClause</span>

			<span class="c1"># Process all use clauses</span>
			<span class="k">for</span> <span class="n">packageReference</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">PackageReferences</span><span class="p">:</span>
				<span class="c1"># A use clause can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">packageReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>  <span class="c1"># type: PackageReferenceSymbol</span>
					<span class="n">packageName</span> <span class="o">=</span> <span class="n">symbol</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Prefix</span>
					<span class="n">libraryName</span> <span class="o">=</span> <span class="n">packageName</span><span class="o">.</span><span class="n">Prefix</span>

					<span class="n">libraryNormalizedIdentifier</span> <span class="o">=</span> <span class="n">libraryName</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
					<span class="n">packageNormalizedIdentifier</span> <span class="o">=</span> <span class="n">packageName</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>

					<span class="c1"># In case work is used, resolve to the real library name.</span>
					<span class="k">if</span> <span class="n">libraryNormalizedIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="n">library</span><span class="p">:</span> <span class="n">Library</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">_parent</span>
						<span class="n">libraryNormalizedIdentifier</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
					<span class="k">elif</span> <span class="n">libraryNormalizedIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
						<span class="c1"># TODO: This check doesn&#39;t trigger if it&#39;s the working library.</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Use clause references library &#39;</span><span class="si">{</span><span class="n">libraryName</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39;, which was not referenced by a library clause.&quot;</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">]</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">package</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">packageNormalizedIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Package &#39;</span><span class="si">{</span><span class="n">packageName</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; not found in </span><span class="si">{</span><span class="s1">&#39;working &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">libraryName</span><span class="o">.</span><span class="n">_normalizedIdentifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;work&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">library &#39;</span><span class="si">{</span><span class="n">library</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

					<span class="n">symbol</span><span class="o">.</span><span class="n">Package</span> <span class="o">=</span> <span class="n">package</span>

					<span class="c1"># TODO: warn duplicate package reference</span>
					<span class="n">context</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryNormalizedIdentifier</span><span class="p">][</span><span class="n">packageNormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">packageReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">UseClause</span>

					<span class="c1"># TODO: update the namespace with visible members</span>
					<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">AllPackageMembersReferenceSymbol</span><span class="p">):</span>
						<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Handling of &#39;myLib.myPackage.all&#39;.&quot;</span><span class="p">))</span>

					<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">PackageMemberReferenceSymbol</span><span class="p">):</span>
						<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Handling of &#39;myLib.myPackage.mySymbol&#39;.&quot;</span><span class="p">))</span>

					<span class="k">else</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.LinkArchitectures">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.LinkArchitectures">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">LinkArchitectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Link all architectures to corresponding entities in all libraries.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all libraries:</span>

<span class="sd">		   1. Iterate all architecture groups (grouped per entity symbol&#39;s name).</span>
<span class="sd">		      |rarr| :meth:`pyVHDLModel.Library.LinkArchitectures`</span>

<span class="sd">		      * Check if entity symbol&#39;s name exists as an entity in this library.</span>

<span class="sd">		      1. For each architecture in the same architecture group:</span>

<span class="sd">		         * Add architecture to entities architecture dictionary :attr:`pyVHDLModel.DesignUnit.Entity._architectures`.</span>
<span class="sd">		         * Assign found entity to architecture&#39;s entity symbol :attr:`pyVHDLModel.DesignUnit.Architecture._entity`</span>
<span class="sd">		         * Set parent namespace of architecture&#39;s namespace to the entitie&#39;s namespace.</span>
<span class="sd">		         * Add an edge in the dependency graph from the architecture&#39;s corresponding dependency vertex to the entity&#39;s corresponding dependency vertex.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`LinkPackageBodies`</span>
<span class="sd">		     Link all package bodies to corresponding packages in all libraries.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">LinkArchitectures</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.LinkPackageBodies">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.LinkPackageBodies">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">LinkPackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Link all package bodies to corresponding packages in all libraries.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all libraries:</span>

<span class="sd">		   1. Iterate all package bodies.</span>
<span class="sd">		      |rarr| :meth:`pyVHDLModel.Library.LinkPackageBodies`</span>

<span class="sd">		      * Check if package body symbol&#39;s name exists as a package in this library.</span>
<span class="sd">		      * Add package body to package :attr:`pyVHDLModel.DesignUnit.Package._packageBody`.</span>
<span class="sd">		      * Assign found package to package body&#39;s package symbol :attr:`pyVHDLModel.DesignUnit.PackageBody._package`</span>
<span class="sd">		      * Set parent namespace of package body&#39;s namespace to the package&#39;s namespace.</span>
<span class="sd">		      * Add an edge in the dependency graph from the package body&#39;s corresponding dependency vertex to the package&#39;s corresponding dependency vertex.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`LinkArchitectures`</span>
<span class="sd">		     Link all architectures to corresponding entities in all libraries.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">LinkPackageBodies</span><span class="p">()</span></div>


	<span class="k">def</span><span class="w"> </span><span class="nf">LinkLibraryReferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">DEFAULT_LIBRARIES</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,)</span>

		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">WithContext</span><span class="p">):</span>
			<span class="c1"># All primary units supporting a context, have at least one library implicitly referenced</span>
			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">PrimaryUnit</span><span class="p">):</span>
				<span class="k">for</span> <span class="n">libraryIdentifier</span> <span class="ow">in</span> <span class="n">DEFAULT_LIBRARIES</span><span class="p">:</span>
					<span class="n">referencedLibrary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">referencedLibrary</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="c1"># TODO: catch KeyError on self._libraries[libName]</span>
					<span class="c1"># TODO: warn duplicate library reference</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">referencedLibrary</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">LibraryClause</span>

				<span class="n">workingLibrary</span><span class="p">:</span> <span class="n">Library</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Library</span>
				<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">workingLibrary</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
				<span class="n">referencedLibrary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>


				<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">referencedLibrary</span>
				<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
				<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

				<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">referencedLibrary</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
				<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">LibraryClause</span>

			<span class="c1"># All secondary units inherit referenced libraries from their primary units.</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">):</span>
					<span class="n">referencedLibraries</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">_referencedLibraries</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">):</span>
					<span class="n">referencedLibraries</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Package</span><span class="o">.</span><span class="n">Package</span><span class="o">.</span><span class="n">_referencedLibraries</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>

				<span class="k">for</span> <span class="n">libraryIdentifier</span><span class="p">,</span> <span class="n">library</span> <span class="ow">in</span> <span class="n">referencedLibraries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>

			<span class="k">for</span> <span class="n">libraryReference</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_libraryReferences</span><span class="p">:</span>
				<span class="c1"># A library clause can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">librarySymbol</span> <span class="ow">in</span> <span class="n">libraryReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">librarySymbol</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">if</span> <span class="n">libraryIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="k">continue</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="n">ex</span> <span class="o">=</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Library &#39;</span><span class="si">{</span><span class="n">librarySymbol</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; referenced by library clause of design unit &#39;</span><span class="si">{</span><span class="n">designUnit</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist in design.&quot;</span><span class="p">)</span>
						<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Known libraries: &#39;</span><span class="si">{</span><span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">library</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;&quot;&quot;</span><span class="p">)</span>
						<span class="k">raise</span> <span class="n">ex</span>

					<span class="n">librarySymbol</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="c1"># TODO: warn duplicate library reference</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">library</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">libraryReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">LibraryClause</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">LinkPackageReferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">DEFAULT_PACKAGES</span> <span class="o">=</span> <span class="p">(</span>
			<span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;standard&quot;</span><span class="p">,)),</span>
		<span class="p">)</span>

		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">WithContext</span><span class="p">):</span>
			<span class="c1"># All primary units supporting a context, have at least one package implicitly referenced</span>
			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">PrimaryUnit</span><span class="p">):</span>
				<span class="k">if</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span> <span class="o">!=</span> <span class="s2">&quot;std&quot;</span> <span class="ow">and</span> \
					<span class="n">designUnit</span><span class="o">.</span><span class="n">NormalizedIdentifier</span> <span class="o">!=</span> <span class="s2">&quot;standard&quot;</span><span class="p">:</span>
					<span class="k">for</span> <span class="n">lib</span> <span class="ow">in</span> <span class="n">DEFAULT_PACKAGES</span><span class="p">:</span>
						<span class="k">if</span> <span class="n">lib</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
							<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>
						<span class="k">for</span> <span class="n">pack</span> <span class="ow">in</span> <span class="n">lib</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
							<span class="n">referencedPackage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">lib</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">pack</span><span class="p">]</span>
							<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">lib</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">pack</span><span class="p">]</span> <span class="o">=</span> <span class="n">referencedPackage</span>
							<span class="c1"># TODO: catch KeyError on self._libraries[lib[0]]._packages[pack]</span>
							<span class="c1"># TODO: warn duplicate package reference</span>

							<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">referencedPackage</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
							<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">UseClause</span>

			<span class="c1"># All secondary units inherit referenced packages from their primary units.</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">):</span>
					<span class="n">referencedPackages</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">_referencedPackages</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">):</span>
					<span class="n">referencedPackages</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Package</span><span class="o">.</span><span class="n">Package</span><span class="o">.</span><span class="n">_referencedPackages</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>

				<span class="k">for</span> <span class="n">packageIdentifier</span><span class="p">,</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">referencedPackages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>

			<span class="k">for</span> <span class="n">packageReference</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">PackageReferences</span><span class="p">:</span>
				<span class="c1"># A use clause can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">packageMemberSymbol</span> <span class="ow">in</span> <span class="n">packageReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">packageName</span> <span class="o">=</span> <span class="n">packageMemberSymbol</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Prefix</span>
					<span class="n">libraryName</span> <span class="o">=</span> <span class="n">packageName</span><span class="o">.</span><span class="n">Prefix</span>

					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">libraryName</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="n">packageIdentifier</span> <span class="o">=</span> <span class="n">packageName</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>

					<span class="c1"># In case work is used, resolve to the real library name.</span>
					<span class="k">if</span> <span class="n">libraryIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="n">library</span><span class="p">:</span> <span class="n">Library</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Library</span>
						<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">elif</span> <span class="n">libraryIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
						<span class="c1"># TODO: This check doesn&#39;t trigger if it&#39;s the working library.</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Use clause references library &#39;</span><span class="si">{</span><span class="n">libraryName</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;, which was not referenced by a library clause.&quot;</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">package</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">packageIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="n">ex</span> <span class="o">=</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Package &#39;</span><span class="si">{</span><span class="n">packageName</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in </span><span class="si">{</span><span class="s1">&#39;working &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">libraryName</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;work&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">library &#39;</span><span class="si">{</span><span class="n">library</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
						<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Caused in design unit &#39;</span><span class="si">{</span><span class="n">designUnit</span><span class="si">}</span><span class="s2">&#39; in file &#39;</span><span class="si">{</span><span class="n">designUnit</span><span class="o">.</span><span class="n">Document</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
						<span class="k">raise</span> <span class="n">ex</span>

					<span class="n">packageMemberSymbol</span><span class="o">.</span><span class="n">Package</span> <span class="o">=</span> <span class="n">package</span>

					<span class="c1"># TODO: warn duplicate package reference</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">][</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">packageReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">UseClause</span>

					<span class="c1"># TODO: update the namespace with visible members</span>
					<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">packageMemberSymbol</span><span class="p">,</span> <span class="n">AllPackageMembersReferenceSymbol</span><span class="p">):</span>
						<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Handling of &#39;myLib.myPackage.all&#39;. Exception: components are handled.&quot;</span><span class="p">))</span>

						<span class="k">for</span> <span class="n">componentIdentifier</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_components</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
							<span class="n">designUnit</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">_elements</span><span class="p">[</span><span class="n">componentIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">component</span>

					<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">packageMemberSymbol</span><span class="p">,</span> <span class="n">PackageMemberReferenceSymbol</span><span class="p">):</span>
						<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Handling of &#39;myLib.myPackage.mySymbol&#39;.&quot;</span><span class="p">))</span>

					<span class="k">else</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">LinkContextReferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">():</span>
			<span class="k">for</span> <span class="n">contextReference</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_contextReferences</span><span class="p">:</span>
				<span class="c1"># A context reference can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">contextSymbol</span> <span class="ow">in</span> <span class="n">contextReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">libraryName</span> <span class="o">=</span> <span class="n">contextSymbol</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Prefix</span>

					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">libraryName</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="n">contextIdentifier</span> <span class="o">=</span> <span class="n">contextSymbol</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>

					<span class="c1"># In case work is used, resolve to the real library name.</span>
					<span class="k">if</span> <span class="n">libraryIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="n">referencedLibrary</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Library</span>
						<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">referencedLibrary</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">elif</span> <span class="n">libraryIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
						<span class="c1"># TODO: This check doesn&#39;t trigger if it&#39;s the working library.</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Context reference references library &#39;</span><span class="si">{</span><span class="n">libraryName</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;, which was not referenced by a library clause.&quot;</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">referencedLibrary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">referencedContext</span> <span class="o">=</span> <span class="n">referencedLibrary</span><span class="o">.</span><span class="n">_contexts</span><span class="p">[</span><span class="n">contextIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Context &#39;</span><span class="si">{</span><span class="n">contextSymbol</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in </span><span class="si">{</span><span class="s1">&#39;working &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">libraryName</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;work&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">library &#39;</span><span class="si">{</span><span class="n">referencedLibrary</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

					<span class="n">contextSymbol</span><span class="o">.</span><span class="n">Package</span> <span class="o">=</span> <span class="n">referencedContext</span>

					<span class="c1"># TODO: warn duplicate referencedContext reference</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">][</span><span class="n">contextIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">referencedContext</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">referencedContext</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">contextReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">ContextReference</span>

		<span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="o">.</span><span class="n">IterateTopologically</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">vertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Context</span><span class="p">:</span>
				<span class="n">context</span><span class="p">:</span> <span class="n">Context</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">Value</span>
				<span class="k">for</span> <span class="n">designUnitVertex</span> <span class="ow">in</span> <span class="n">vertex</span><span class="o">.</span><span class="n">IteratePredecessorVertices</span><span class="p">():</span>
					<span class="n">designUnit</span><span class="p">:</span> <span class="n">DesignUnit</span> <span class="o">=</span> <span class="n">designUnitVertex</span><span class="o">.</span><span class="n">Value</span>
					<span class="k">for</span> <span class="n">libraryIdentifier</span><span class="p">,</span> <span class="n">library</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
						<span class="c1"># if libraryIdentifier in designUnit._referencedLibraries:</span>
						<span class="c1"># 	raise VHDLModelException(f&quot;Referenced library &#39;{library.Identifier}&#39; already exists in references for design unit &#39;{designUnit.Identifier}&#39;.&quot;)</span>

						<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
						<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

					<span class="k">for</span> <span class="n">libraryIdentifier</span><span class="p">,</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
						<span class="k">for</span> <span class="n">packageIdentifier</span><span class="p">,</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
							<span class="k">if</span> <span class="n">packageIdentifier</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">:</span>
								<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Referenced package &#39;</span><span class="si">{</span><span class="n">package</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in references for design unit &#39;</span><span class="si">{</span><span class="n">designUnit</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

							<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">][</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">LinkComponents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span><span class="p">):</span>  <span class="c1"># type: Package</span>
			<span class="n">library</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_parent</span>
			<span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_components</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">entity</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="p">]</span>
				<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
					<span class="k">if</span> <span class="ow">not</span> <span class="n">component</span><span class="o">.</span><span class="n">AllowBlackbox</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity &#39;</span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found for component &#39;</span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; in library &#39;</span><span class="si">{</span><span class="n">library</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">component</span><span class="o">.</span><span class="n">_isBlackBox</span> <span class="o">=</span> <span class="kc">True</span>
						<span class="k">continue</span>

				<span class="n">component</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="n">entity</span>

				<span class="c1"># QUESTION: Add link in dependency graph as dashed line from component to entity?</span>
				<span class="c1">#           Currently, component has no _dependencyVertex field</span>

		<span class="c1"># FIXME: also link components in architectures (and nested structures like generate statements and block statements</span>
		<span class="c1"># for architecture in self.IterateDesignUnits(DesignUnitKind.Architecture):</span>
		<span class="c1"># 	library = architecture._parent</span>
		<span class="c1"># 	for component in architecture._components.values():</span>
		<span class="c1"># 		pass</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">LinkInstantiations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Architecture</span><span class="p">):</span>  <span class="c1"># type: Architecture</span>
			<span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">architecture</span><span class="o">.</span><span class="n">IterateInstantiations</span><span class="p">():</span>
				<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">EntityInstantiation</span><span class="p">):</span>
					<span class="n">libraryName</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Prefix</span>
					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">libraryName</span><span class="o">.</span><span class="n">Identifier</span>
					<span class="n">normalizedLibraryIdentifier</span> <span class="o">=</span> <span class="n">libraryName</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">if</span> <span class="n">normalizedLibraryIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">Library</span><span class="o">.</span><span class="n">Identifier</span>
						<span class="n">normalizedLibraryIdentifier</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">Library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">elif</span> <span class="n">normalizedLibraryIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
						<span class="n">ex</span> <span class="o">=</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Referenced library &#39;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&#39; in direct entity instantiation &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="si">}</span><span class="s2">: entity </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in architecture &#39;</span><span class="si">{</span><span class="n">architecture</span><span class="si">!r}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
						<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Add a library reference to the architecture or entity using a library clause like: &#39;library </span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">;&#39;.&quot;</span><span class="p">)</span>
						<span class="k">raise</span> <span class="n">ex</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">normalizedLibraryIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="n">ex</span> <span class="o">=</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Referenced library &#39;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&#39; in direct entity instantiation &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="si">}</span><span class="s2">: entity </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in design.&quot;</span><span class="p">)</span>
						<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No design units were parsed into library &#39;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&#39;. Thus it doesn&#39;t exist in design.&quot;</span><span class="p">)</span>
						<span class="k">raise</span> <span class="n">ex</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">entity</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="n">ex</span> <span class="o">=</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Referenced entity &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; in direct entity instantiation &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="si">}</span><span class="s2">: entity </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in </span><span class="si">{</span><span class="s1">&#39;working &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;work&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">library &#39;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
						<span class="n">libs</span> <span class="o">=</span> <span class="p">[</span><span class="n">library</span><span class="o">.</span><span class="n">Identifier</span> <span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">entityIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">entityIdentifier</span> <span class="o">==</span> <span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Name</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="p">]</span>
						<span class="k">if</span> <span class="n">libs</span><span class="p">:</span>
							<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found entity &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="si">!s}</span><span class="s2">&#39; in other libraries: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">libs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
						<span class="k">raise</span> <span class="n">ex</span>

					<span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="n">entity</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">instance</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">EntityInstantiation</span>

				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">ComponentInstantiation</span><span class="p">):</span>
					<span class="n">component</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">FindComponent</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">Component</span><span class="p">)</span>

					<span class="n">instance</span><span class="o">.</span><span class="n">Component</span><span class="o">.</span><span class="n">Component</span> <span class="o">=</span> <span class="n">component</span>

					<span class="k">if</span> <span class="ow">not</span> <span class="n">component</span><span class="o">.</span><span class="n">IsBlackbox</span><span class="p">:</span>
						<span class="n">dependency</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">instance</span><span class="p">)</span>
						<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">ComponentInstantiation</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">BlackboxWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Blackbox caused by &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Component</span><span class="o">.</span><span class="n">Name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">))</span>

				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">ConfigurationInstantiation</span><span class="p">):</span>
					<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration instantiation of &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Configuration</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">))</span>

<div class="viewcode-block" id="Design.IndexPackages">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.IndexPackages">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IndexPackages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index all declared items in all packages in all libraries.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all libraries:</span>

<span class="sd">		   1. Iterate all packages |br|</span>
<span class="sd">		      |rarr| :meth:`pyVHDLModel.Library.IndexPackages`</span>

<span class="sd">		      * Index all declared items in that package. |br|</span>
<span class="sd">		        |rarr| :meth:`pyVHDLModel.DesignUnit.Package.IndexDeclaredItems`</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`IndexPackageBodies`</span>
<span class="sd">		     Index all declared items in all package bodies in all libraries.</span>
<span class="sd">		   :meth:`IndexEntities`</span>
<span class="sd">		     Index all declared items in all entities in all libraries.</span>
<span class="sd">		   :meth:`IndexArchitectures`</span>
<span class="sd">		     Index all declared items in all architectures in all libraries.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">IndexPackages</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.IndexPackageBodies">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.IndexPackageBodies">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IndexPackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index all declared items in all packages in all libraries.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all libraries:</span>

<span class="sd">		   1. Iterate all packages |br|</span>
<span class="sd">		      |rarr| :meth:`pyVHDLModel.Library.IndexPackageBodies`</span>

<span class="sd">		      * Index all declared items in that package body. |br|</span>
<span class="sd">		        |rarr| :meth:`pyVHDLModel.DesignUnit.PackageBody.IndexDeclaredItems`</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`IndexPackages`</span>
<span class="sd">		     Index all declared items in all packages in all libraries.</span>
<span class="sd">		   :meth:`IndexEntities`</span>
<span class="sd">		     Index all declared items in all entities in all libraries.</span>
<span class="sd">		   :meth:`IndexArchitectures`</span>
<span class="sd">		     Index all declared items in all architectures in all libraries.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">IndexPackageBodies</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.IndexEntities">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.IndexEntities">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IndexEntities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index all declared items in all packages in all libraries.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all libraries:</span>

<span class="sd">		   1. Iterate all packages |br|</span>
<span class="sd">		      |rarr| :meth:`pyVHDLModel.Library.IndexEntities`</span>

<span class="sd">		      * Index all declared items in that entity. |br|</span>
<span class="sd">		        |rarr| :meth:`pyVHDLModel.DesignUnit.Entity.IndexDeclaredItems`</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`IndexPackages`</span>
<span class="sd">		     Index all declared items in all packages in all libraries.</span>
<span class="sd">		   :meth:`IndexPackageBodies`</span>
<span class="sd">		     Index all declared items in all package bodies in all libraries.</span>
<span class="sd">		   :meth:`IndexArchitectures`</span>
<span class="sd">		     Index all declared items in all architectures in all libraries.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">IndexEntities</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.IndexArchitectures">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.IndexArchitectures">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IndexArchitectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index all declared items in all packages in all libraries.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all libraries:</span>

<span class="sd">		   1. Iterate all packages |br|</span>
<span class="sd">		      |rarr| :meth:`pyVHDLModel.Library.IndexArchitectures`</span>

<span class="sd">		      * Index all declared items in that architecture. |br|</span>
<span class="sd">		        |rarr| :meth:`pyVHDLModel.DesignUnit.Architecture.IndexDeclaredItems`</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`IndexPackages`</span>
<span class="sd">		     Index all declared items in all packages in all libraries.</span>
<span class="sd">		   :meth:`IndexPackageBodies`</span>
<span class="sd">		     Index all declared items in all package bodies in all libraries.</span>
<span class="sd">		   :meth:`IndexEntities`</span>
<span class="sd">		     Index all declared items in all entities in all libraries.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">IndexArchitectures</span><span class="p">()</span></div>


<div class="viewcode-block" id="Design.CreateHierarchyGraph">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.CreateHierarchyGraph">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">CreateHierarchyGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Create the hierarchy graph from dependency graph.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all vertices corresponding to entities and architectures in the dependency graph:</span>

<span class="sd">		   * Copy these vertices to the hierarchy graph and create a bidirectional linking. |br|</span>
<span class="sd">		     In addition, set the referenced design unit&#39;s :attr:`~pyVHDLModel.Document._hierarchyVertex` field to reference the copied vertex.</span>

<span class="sd">		     * Add a key-value-pair called ``hierarchyVertex`` to the dependency graph&#39;s vertex.</span>
<span class="sd">		     * Add a key-value-pair called ``dependencyVertex`` to the hierarchy graph&#39;s vertex.</span>

<span class="sd">		2. Iterate all architectures ...</span>

<span class="sd">		   .. todo:: Design::CreateHierarchyGraph describe algorithm</span>

<span class="sd">		   1. Iterate all outbound edges</span>

<span class="sd">		      .. todo:: Design::CreateHierarchyGraph describe algorithm</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Copy all entity and architecture vertices from dependency graph to hierarchy graph and double-link them</span>
		<span class="n">entityArchitectureFilter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Entity</span> <span class="o">|</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Architecture</span>
		<span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="o">.</span><span class="n">IterateVertices</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">entityArchitectureFilter</span><span class="p">):</span>
			<span class="n">hierarchyVertex</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">Copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="p">,</span> <span class="n">copyDict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linkingKeyToOriginalVertex</span><span class="o">=</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">,</span> <span class="n">linkingKeyFromOriginalVertex</span><span class="o">=</span><span class="s2">&quot;hierarchyVertex&quot;</span><span class="p">)</span>
			<span class="n">vertex</span><span class="o">.</span><span class="n">Value</span><span class="o">.</span><span class="n">_hierarchyVertex</span> <span class="o">=</span> <span class="n">hierarchyVertex</span>

		<span class="c1"># Copy implementation edges from</span>
		<span class="k">for</span> <span class="n">hierarchyArchitectureVertex</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="o">.</span><span class="n">IterateVertices</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Architecture</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">dependencyEdge</span> <span class="ow">in</span> <span class="n">hierarchyArchitectureVertex</span><span class="p">[</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">IterateOutboundEdges</span><span class="p">():</span>
				<span class="n">kind</span><span class="p">:</span> <span class="n">DependencyGraphEdgeKind</span> <span class="o">=</span> <span class="n">dependencyEdge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span>
				<span class="k">if</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">Implementation</span> <span class="ow">in</span> <span class="n">kind</span><span class="p">:</span>
					<span class="n">hierarchyDestinationVertex</span> <span class="o">=</span> <span class="n">dependencyEdge</span><span class="o">.</span><span class="n">Destination</span><span class="p">[</span><span class="s2">&quot;hierarchyVertex&quot;</span><span class="p">]</span>
					<span class="n">newEdge</span> <span class="o">=</span> <span class="n">hierarchyArchitectureVertex</span><span class="o">.</span><span class="n">EdgeFromVertex</span><span class="p">(</span><span class="n">hierarchyDestinationVertex</span><span class="p">)</span>
				<span class="k">elif</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">Instantiation</span> <span class="ow">in</span> <span class="n">kind</span><span class="p">:</span>
					<span class="n">hierarchyDestinationVertex</span> <span class="o">=</span> <span class="n">dependencyEdge</span><span class="o">.</span><span class="n">Destination</span><span class="p">[</span><span class="s2">&quot;hierarchyVertex&quot;</span><span class="p">]</span>

					<span class="c1"># FIXME: avoid parallel edges, to graph can be converted to a tree until &quot;real&quot; hierarchy is computed (unrole generics and blocks)</span>
					<span class="k">if</span> <span class="n">hierarchyArchitectureVertex</span><span class="o">.</span><span class="n">HasEdgeToDestination</span><span class="p">(</span><span class="n">hierarchyDestinationVertex</span><span class="p">):</span>
						<span class="k">continue</span>

					<span class="n">newEdge</span> <span class="o">=</span> <span class="n">hierarchyArchitectureVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">hierarchyDestinationVertex</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">continue</span>

				<span class="n">newEdge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kind</span></div>


	<span class="k">def</span><span class="w"> </span><span class="nf">ComputeCompileOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">predicate</span><span class="p">(</span><span class="n">edge</span><span class="p">:</span> <span class="n">Edge</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">(</span>
				<span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">Implementation</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">or</span>
				<span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">Instantiation</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">or</span>
				<span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">UseClause</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">or</span>
				<span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">ContextReference</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span>
			<span class="p">)</span> <span class="ow">and</span> <span class="n">edge</span><span class="o">.</span><span class="n">Destination</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">False</span>

		<span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="o">.</span><span class="n">IterateEdges</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">):</span>
			<span class="n">sourceDocument</span><span class="p">:</span>      <span class="n">Document</span> <span class="o">=</span> <span class="n">edge</span><span class="o">.</span><span class="n">Source</span><span class="o">.</span><span class="n">Value</span><span class="o">.</span><span class="n">Document</span>
			<span class="n">destinationDocument</span><span class="p">:</span> <span class="n">Document</span> <span class="o">=</span> <span class="n">edge</span><span class="o">.</span><span class="n">Destination</span><span class="o">.</span><span class="n">Value</span><span class="o">.</span><span class="n">Document</span>

			<span class="n">sourceVertex</span> <span class="o">=</span>      <span class="n">sourceDocument</span><span class="o">.</span><span class="n">_compileOrderVertex</span>
			<span class="n">destinationVertex</span> <span class="o">=</span> <span class="n">destinationDocument</span><span class="o">.</span><span class="n">_compileOrderVertex</span>

			<span class="c1"># Don&#39;t add self-edges</span>
			<span class="k">if</span> <span class="n">sourceVertex</span> <span class="ow">is</span> <span class="n">destinationVertex</span><span class="p">:</span>
				<span class="k">continue</span>
			<span class="c1"># Don&#39;t add parallel edges</span>
			<span class="k">elif</span> <span class="n">sourceVertex</span><span class="o">.</span><span class="n">HasEdgeToDestination</span><span class="p">(</span><span class="n">destinationVertex</span><span class="p">):</span>
				<span class="k">continue</span>

			<span class="n">e</span> <span class="o">=</span> <span class="n">sourceVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">destinationVertex</span><span class="p">)</span>
			<span class="n">e</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">CompileOrder</span>

			<span class="n">e</span> <span class="o">=</span> <span class="n">sourceVertex</span><span class="p">[</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">destinationVertex</span><span class="p">[</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">])</span>
			<span class="n">e</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">CompileOrder</span>

<div class="viewcode-block" id="Design.IterateDocumentsInCompileOrder">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.IterateDocumentsInCompileOrder">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IterateDocumentsInCompileOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Iterate all document in compile-order.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		* Check if compile-order graph was populated with vertices and its vertices are linked by edges.</span>

<span class="sd">		1. Iterate compile-order graph in topological order. |br|</span>
<span class="sd">		   :meth:`pyTooling.Graph.Graph.IterateTopologically`</span>

<span class="sd">		   * yield the compiler-order vertex&#39; referenced document.</span>

<span class="sd">		:returns:                   A generator to iterate all documents in compile-order in the design.</span>
<span class="sd">		:raises VHDLModelException: If compile-order was not computed.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   .. todo:: missing text</span>

<span class="sd">		      :meth:`pyVHDLModel.Design.ComputeCompileOrder`</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span><span class="o">.</span><span class="n">EdgeCount</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span><span class="o">.</span><span class="n">VertexCount</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Compile order is not yet computed from dependency graph.&quot;</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">compileOrderNode</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span><span class="o">.</span><span class="n">IterateTopologically</span><span class="p">():</span>
			<span class="k">yield</span> <span class="n">compileOrderNode</span><span class="o">.</span><span class="n">Value</span></div>


	<span class="k">def</span><span class="w"> </span><span class="nf">GetUnusedDesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">]:</span>
		<span class="n">WarningCollector</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">NotImplementedWarning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Compute unused design units.&quot;</span><span class="p">))</span>

<div class="viewcode-block" id="Design.__repr__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Design.__repr__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats a representation of the design.</span>

<span class="sd">		**Format:** ``Document: &#39;my_design&#39;``</span>

<span class="sd">		:returns: String representation of the design.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Design: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="si">}</span><span class="s2">&quot;</span></div>


	<span class="fm">__str__</span> <span class="o">=</span> <span class="fm">__repr__</span></div>



<div class="viewcode-block" id="Library">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library">[docs]</a>
<span class="nd">@export</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Library</span><span class="p">(</span><span class="n">ModelEntity</span><span class="p">,</span> <span class="n">NamedEntityMixin</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;A ``Library`` represents a VHDL library. It contains all *primary* and *secondary* design units.&quot;&quot;&quot;</span>

	<span class="n">_allowBlackbox</span><span class="p">:</span>  <span class="n">Nullable</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span>                      <span class="c1">#: Allow blackboxes for components in this library.</span>
	<span class="n">_contexts</span><span class="p">:</span>       <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Context</span><span class="p">]</span>                  <span class="c1">#: Dictionary of all contexts defined in a library.</span>
	<span class="n">_configurations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]</span>            <span class="c1">#: Dictionary of all configurations defined in a library.</span>
	<span class="n">_entities</span><span class="p">:</span>       <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">]</span>                   <span class="c1">#: Dictionary of all entities defined in a library.</span>
	<span class="n">_architectures</span><span class="p">:</span>  <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">]]</span>  <span class="c1">#: Dictionary of all architectures defined in a library.</span>
	<span class="n">_packages</span><span class="p">:</span>       <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Package</span><span class="p">]</span>                  <span class="c1">#: Dictionary of all packages defined in a library.</span>
	<span class="n">_packageBodies</span><span class="p">:</span>  <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">]</span>              <span class="c1">#: Dictionary of all package bodies defined in a library.</span>

	<span class="n">_dependencyVertex</span><span class="p">:</span> <span class="n">Vertex</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="s1">&#39;Library&#39;</span><span class="p">,</span> <span class="n">DesignUnit</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>  <span class="c1">#: Reference to the vertex in the dependency graph representing the library. |br| This reference is set by :meth:`~pyVHDLModel.Design.CreateDependencyGraph`.</span>

<div class="viewcode-block" id="Library.__init__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.__init__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">allowBlackbox</span><span class="p">:</span> <span class="n">Nullable</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">parent</span><span class="p">:</span> <span class="n">ModelEntity</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize a VHDL library.</span>

<span class="sd">		:param identifier:    Name of the VHDL library.</span>
<span class="sd">		:param allowBlackbox: Specify if blackboxes are allowed in this design.</span>
<span class="sd">		:param parent:        The parent model entity (design) of this VHDL library.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="n">NamedEntityMixin</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_allowBlackbox</span> <span class="o">=</span> <span class="n">allowBlackbox</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span> <span class="o">=</span>        <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span> <span class="o">=</span>  <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_entities</span> <span class="o">=</span>        <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span> <span class="o">=</span>   <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_packages</span> <span class="o">=</span>        <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span> <span class="o">=</span>   <span class="p">{}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="kc">None</span></div>


	<span class="nd">@property</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">AllowBlackbox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to check if a design supports blackboxes (:attr:`_allowBlackbox`).</span>

<span class="sd">		:returns: If blackboxes are allowed.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowBlackbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">AllowBlackbox</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowBlackbox</span>

	<span class="nd">@AllowBlackbox</span><span class="o">.</span><span class="n">setter</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">AllowBlackbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Nullable</span><span class="p">[</span><span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_allowBlackbox</span> <span class="o">=</span> <span class="n">value</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Context</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all context declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Configurations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all configuration declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Entities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all entity declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Architectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">]]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all architectures declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Package</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all package declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">PackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all package body declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">DependencyVertex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vertex</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the corresponding dependency vertex (:attr:`_dependencyVertex`).</span>

<span class="sd">		The dependency vertex references this library by its value field.</span>

<span class="sd">		:returns: The corresponding dependency vertex.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyVertex</span>

<div class="viewcode-block" id="Library.IterateDesignUnits">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.IterateDesignUnits">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IterateDesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">DesignUnitKind</span> <span class="o">=</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">All</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Iterate all design units in the library.</span>

<span class="sd">		A union of :class:`DesignUnitKind` values can be given to filter the returned result for suitable design units.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all contexts in that library.</span>
<span class="sd">		2. Iterate all packages in that library.</span>
<span class="sd">		3. Iterate all package bodies in that library.</span>
<span class="sd">		4. Iterate all entities in that library.</span>
<span class="sd">		5. Iterate all architectures in that library.</span>
<span class="sd">		6. Iterate all configurations in that library.</span>

<span class="sd">		:param filter: An enumeration with possibly multiple flags to filter the returned design units.</span>
<span class="sd">		:returns:      A generator to iterate all matched design units in the library.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`pyVHDLModel.Design.IterateDesignUnits`</span>
<span class="sd">		     Iterate all design units in the design.</span>
<span class="sd">		   :meth:`pyVHDLModel.Document.IterateDesignUnits`</span>
<span class="sd">		     Iterate all design units in the document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Context</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">context</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">package</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">PackageBody</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">packageBody</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Entity</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">entity</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Architecture</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
					<span class="k">yield</span> <span class="n">architecture</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Configuration</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">configuration</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">configuration</span></div>


		<span class="c1"># for verificationProperty in self._verificationUnits.values():</span>
		<span class="c1"># 	yield verificationProperty</span>
		<span class="c1"># for verificationUnit in self._verificationProperties.values():</span>
		<span class="c1"># 	yield entity</span>
		<span class="c1"># for verificationMode in self._verificationModes.values():</span>
		<span class="c1"># 	yield verificationMode</span>

<div class="viewcode-block" id="Library.LinkArchitectures">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.LinkArchitectures">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">LinkArchitectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Link all architectures to corresponding entities.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all architecture groups (grouped per entity symbol&#39;s name).</span>

<span class="sd">		   * Check if entity symbol&#39;s name exists as an entity in this library.</span>

<span class="sd">		   1. For each architecture in the same architecture group:</span>

<span class="sd">		      * Add architecture to entities architecture dictionary :attr:`pyVHDLModel.DesignUnit.Entity._architectures`.</span>
<span class="sd">		      * Assign found entity to architecture&#39;s entity symbol :attr:`pyVHDLModel.DesignUnit.Architecture._entity`</span>
<span class="sd">		      * Set parent namespace of architecture&#39;s namespace to the entitie&#39;s namespace.</span>
<span class="sd">		      * Add an edge in the dependency graph from the architecture&#39;s corresponding dependency vertex to the entity&#39;s corresponding dependency vertex.</span>

<span class="sd">		:raises VHDLModelException: If entity name doesn&#39;t exist.</span>
<span class="sd">		:raises VHDLModelException: If architecture name already exists for entity.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`LinkPackageBodies`</span>
<span class="sd">		     Link all package bodies to corresponding packages.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">entityName</span><span class="p">,</span> <span class="n">architecturesPerEntity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">entityName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">:</span>
				<span class="n">architectureNames</span> <span class="o">=</span> <span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">architecturesPerEntity</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
				<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity &#39;</span><span class="si">{</span><span class="n">entityName</span><span class="si">}</span><span class="s2">&#39; referenced by architecture(s) &#39;</span><span class="si">{</span><span class="n">architectureNames</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist in library &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="c1"># TODO: search in other libraries to find that entity.</span>
			<span class="c1"># TODO: add code position</span>

			<span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">entityName</span><span class="p">]</span>
			<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architecturesPerEntity</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">if</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">_architectures</span><span class="p">:</span>
					<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Architecture &#39;</span><span class="si">{</span><span class="n">architecture</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; already exists for entity &#39;</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
				<span class="c1"># TODO: add code position of existing and current</span>

				<span class="n">entity</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">architecture</span><span class="o">.</span><span class="n">_normalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">architecture</span>
				<span class="n">architecture</span><span class="o">.</span><span class="n">_entity</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="n">entity</span>
				<span class="n">architecture</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">_parentNamespace</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">_namespace</span>

				<span class="c1"># add &quot;architecture -&gt; entity&quot; relation in dependency graph</span>
				<span class="n">dependency</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
				<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">EntityImplementation</span></div>


<div class="viewcode-block" id="Library.LinkPackageBodies">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.LinkPackageBodies">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">LinkPackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Link all package bodies to corresponding packages.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all package bodies.</span>

<span class="sd">		   * Check if package body symbol&#39;s name exists as a package in this library.</span>
<span class="sd">		   * Add package body to package :attr:`pyVHDLModel.DesignUnit.Package._packageBody`.</span>
<span class="sd">		   * Assign found package to package body&#39;s package symbol :attr:`pyVHDLModel.DesignUnit.PackageBody._package`</span>
<span class="sd">		   * Set parent namespace of package body&#39;s namespace to the package&#39;s namespace.</span>
<span class="sd">		   * Add an edge in the dependency graph from the package body&#39;s corresponding dependency vertex to the package&#39;s corresponding dependency vertex.</span>

<span class="sd">		:raises VHDLModelException: If package name doesn&#39;t exist.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`LinkArchitectures`</span>
<span class="sd">		     Link all architectures to corresponding entities.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">packageBodyName</span><span class="p">,</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">packageBodyName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Package &#39;</span><span class="si">{</span><span class="n">packageBodyName</span><span class="si">}</span><span class="s2">&#39; referenced by package body &#39;</span><span class="si">{</span><span class="n">packageBodyName</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist in library &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

			<span class="n">package</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">packageBodyName</span><span class="p">]</span>
			<span class="n">package</span><span class="o">.</span><span class="n">_packageBody</span> <span class="o">=</span> <span class="n">packageBody</span>    <span class="c1"># TODO: add warning if package had already a body, which is now replaced</span>
			<span class="n">packageBody</span><span class="o">.</span><span class="n">_package</span><span class="o">.</span><span class="n">Package</span> <span class="o">=</span> <span class="n">package</span>
			<span class="n">packageBody</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">_parentNamespace</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span>

			<span class="c1"># add &quot;package body -&gt; package&quot; relation in dependency graph</span>
			<span class="n">dependency</span> <span class="o">=</span> <span class="n">packageBody</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">EdgeToVertex</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
			<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">PackageImplementation</span></div>


<div class="viewcode-block" id="Library.IndexPackages">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.IndexPackages">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IndexPackages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index declared items in all packages.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all packages:</span>

<span class="sd">		   * Index all declared items. |br|</span>
<span class="sd">		     |rarr| :meth:`pyVHDLModel.DesignUnit.Package.IndexDeclaredItems`</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`IndexPackageBodies`</span>
<span class="sd">		     Index all declared items in a package body.</span>
<span class="sd">		   :meth:`IndexEntities`</span>
<span class="sd">		     Index all declared items in an entity.</span>
<span class="sd">		   :meth:`IndexArchitectures`</span>
<span class="sd">		     Index all declared items in an architecture.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">Package</span><span class="p">):</span>
				<span class="n">package</span><span class="o">.</span><span class="n">IndexDeclaredItems</span><span class="p">()</span></div>


<div class="viewcode-block" id="Library.IndexPackageBodies">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.IndexPackageBodies">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IndexPackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index declared items in all package bodies.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all package bodies:</span>

<span class="sd">		   * Index all declared items. |br|</span>
<span class="sd">		     |rarr| :meth:`pyVHDLModel.DesignUnit.PackageBody.IndexDeclaredItems`</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`IndexPackages`</span>
<span class="sd">		     Index all declared items in a package.</span>
<span class="sd">		   :meth:`IndexEntities`</span>
<span class="sd">		     Index all declared items in an entity.</span>
<span class="sd">		   :meth:`IndexArchitectures`</span>
<span class="sd">		     Index all declared items in an architecture.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">packageBody</span><span class="o">.</span><span class="n">IndexDeclaredItems</span><span class="p">()</span></div>


<div class="viewcode-block" id="Library.IndexEntities">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.IndexEntities">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IndexEntities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index declared items in all entities.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all entities:</span>

<span class="sd">		   * Index all declared items. |br|</span>
<span class="sd">		     |rarr| :meth:`pyVHDLModel.DesignUnit.Entity.IndexDeclaredItems`</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`IndexPackages`</span>
<span class="sd">		     Index all declared items in a package.</span>
<span class="sd">		   :meth:`IndexPackageBodies`</span>
<span class="sd">		     Index all declared items in a package body.</span>
<span class="sd">		   :meth:`IndexArchitectures`</span>
<span class="sd">		     Index all declared items in an architecture.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">IndexDeclaredItems</span><span class="p">()</span></div>


<div class="viewcode-block" id="Library.IndexArchitectures">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.IndexArchitectures">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IndexArchitectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Index declared items in all architectures.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		1. Iterate all architectures:</span>

<span class="sd">		   * Index all declared items. |br|</span>
<span class="sd">		     |rarr| :meth:`pyVHDLModel.DesignUnit.Architecture.IndexDeclaredItems`</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`IndexPackages`</span>
<span class="sd">		     Index all declared items in a package.</span>
<span class="sd">		   :meth:`IndexPackageBodies`</span>
<span class="sd">		     Index all declared items in a package body.</span>
<span class="sd">		   :meth:`IndexEntities`</span>
<span class="sd">		     Index all declared items in an entity.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="n">architecture</span><span class="o">.</span><span class="n">IndexDeclaredItems</span><span class="p">()</span>
				<span class="n">architecture</span><span class="o">.</span><span class="n">IndexStatements</span><span class="p">()</span></div>


<div class="viewcode-block" id="Library.__repr__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Library.__repr__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats a representation of the library.</span>

<span class="sd">		**Format:** ``Library: &#39;my_library&#39;``</span>

<span class="sd">		:returns: String representation of the library.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Library: &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39;&quot;</span></div>


	<span class="fm">__str__</span> <span class="o">=</span> <span class="fm">__repr__</span></div>



<div class="viewcode-block" id="Document">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document">[docs]</a>
<span class="nd">@export</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Document</span><span class="p">(</span><span class="n">ModelEntity</span><span class="p">,</span> <span class="n">DocumentedEntityMixin</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;A ``Document`` represents a sourcefile. It contains *primary* and *secondary* design units.&quot;&quot;&quot;</span>

	<span class="n">_path</span><span class="p">:</span>                   <span class="n">Path</span>                                <span class="c1">#: path to the document. ``None`` if virtual document.</span>
	<span class="n">_designUnits</span><span class="p">:</span>            <span class="n">List</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">]</span>                    <span class="c1">#: List of all design units defined in a document.</span>
	<span class="n">_contexts</span><span class="p">:</span>               <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Context</span><span class="p">]</span>                  <span class="c1">#: Dictionary of all contexts defined in a document.</span>
	<span class="n">_configurations</span><span class="p">:</span>         <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]</span>            <span class="c1">#: Dictionary of all configurations defined in a document.</span>
	<span class="n">_entities</span><span class="p">:</span>               <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">]</span>                   <span class="c1">#: Dictionary of all entities defined in a document.</span>
	<span class="n">_architectures</span><span class="p">:</span>          <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">]]</span>  <span class="c1">#: Dictionary of all architectures defined in a document.</span>
	<span class="n">_packages</span><span class="p">:</span>               <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Package</span><span class="p">]</span>                  <span class="c1">#: Dictionary of all packages defined in a document.</span>
	<span class="n">_packageBodies</span><span class="p">:</span>          <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">]</span>              <span class="c1">#: Dictionary of all package bodies defined in a document.</span>
	<span class="n">_verificationUnits</span><span class="p">:</span>      <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationUnit</span><span class="p">]</span>         <span class="c1">#: Dictionary of all PSL verification units defined in a document.</span>
	<span class="n">_verificationProperties</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">]</span>     <span class="c1">#: Dictionary of all PSL verification properties defined in a document.</span>
	<span class="n">_verificationModes</span><span class="p">:</span>      <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationMode</span><span class="p">]</span>         <span class="c1">#: Dictionary of all PSL verification modes defined in a document.</span>

	<span class="n">_dependencyVertex</span><span class="p">:</span>       <span class="n">Vertex</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>  <span class="c1">#: Reference to the vertex in the dependency graph representing the document. |br| This reference is set by :meth:`~pyVHDLModel.Design.CreateCompileOrderGraph`.</span>
	<span class="n">_compileOrderVertex</span><span class="p">:</span>     <span class="n">Vertex</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>  <span class="c1">#: Reference to the vertex in the compile-order graph representing the document. |br| This reference is set by :meth:`~pyVHDLModel.Design.CreateCompileOrderGraph`.</span>

<div class="viewcode-block" id="Document.__init__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document.__init__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">documentation</span><span class="p">:</span> <span class="n">Nullable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">ModelEntity</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
		<span class="n">DocumentedEntityMixin</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">documentation</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span>                   <span class="n">path</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span> <span class="o">=</span>            <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span> <span class="o">=</span>               <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span> <span class="o">=</span>         <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_entities</span> <span class="o">=</span>               <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span> <span class="o">=</span>          <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_packages</span> <span class="o">=</span>               <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span> <span class="o">=</span>          <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span> <span class="o">=</span>      <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span> <span class="o">=</span>      <span class="p">{}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span>   <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderVertex</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Document._AddEntity">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document._AddEntity">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">_AddEntity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Entity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add an entity to the document&#39;s lists of design units.</span>

<span class="sd">		:param item:                Entity object to be added to the document.</span>
<span class="sd">		:raises TypeError:          If parameter &#39;item&#39; is not of type :class:`~pyVHDLModel.DesignUnits.Entity`.</span>
<span class="sd">		:raises VHDLModelException: If entity name already exists in document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Entity</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Entity&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">:</span>
			<span class="c1"># TODO: use a more specific exception</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An entity &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Document._AddArchitecture">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document._AddArchitecture">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">_AddArchitecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Architecture</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add an architecture to the document&#39;s lists of design units.</span>

<span class="sd">		:param item:                Architecture object to be added to the document.</span>
<span class="sd">		:raises TypeError:          If parameter &#39;item&#39; is not of type :class:`~pyVHDLModel.DesignUnits.Architecture`.</span>
<span class="sd">		:raises VHDLModelException: If architecture name already exists for the referenced entity name in document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Architecture&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">entity</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_entity</span><span class="o">.</span><span class="n">Name</span>
		<span class="n">entityIdentifier</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">architectures</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">architectures</span><span class="p">:</span>
				<span class="c1"># TODO: use a more specific exception</span>
				<span class="c1"># FIXME: this is allowed and should be a warning or a strict mode.</span>
				<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An architecture &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; for entity &#39;</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

			<span class="n">architectures</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">_identifier</span><span class="p">:</span> <span class="n">item</span><span class="p">}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Document._AddPackage">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document._AddPackage">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">_AddPackage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Package</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add a package to the document&#39;s lists of design units.</span>

<span class="sd">		:param item:                Package object to be added to the document.</span>
<span class="sd">		:raises TypeError:          If parameter &#39;item&#39; is not of type :class:`~pyVHDLModel.DesignUnits.Package`.</span>
<span class="sd">		:raises VHDLModelException: If package name already exists in document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">Package</span><span class="p">,</span> <span class="n">PackageInstantiation</span><span class="p">)):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Package&#39; or &#39;PackageInstantiation&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">:</span>
			<span class="c1"># TODO: use a more specific exception</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A package &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Document._AddPackageBody">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document._AddPackageBody">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">_AddPackageBody</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">PackageBody</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add a package body to the document&#39;s lists of design units.</span>

<span class="sd">		:param item:                Package body object to be added to the document.</span>
<span class="sd">		:raises TypeError:          If parameter &#39;item&#39; is not of type :class:`~pyVHDLModel.DesignUnits.PackageBody`.</span>
<span class="sd">		:raises VHDLModelException: If package body name already exists in document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;PackageBody&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">:</span>
			<span class="c1"># TODO: use a more specific exception</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A package body &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Document._AddContext">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document._AddContext">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">_AddContext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add a context to the document&#39;s lists of design units.</span>

<span class="sd">		:param item:                Context object to be added to the document.</span>
<span class="sd">		:raises TypeError:          If parameter &#39;item&#39; is not of type :class:`~pyVHDLModel.DesignUnits.Context`.</span>
<span class="sd">		:raises VHDLModelException: If context name already exists in document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Context</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Context&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="p">:</span>
			<span class="c1"># TODO: use a more specific exception</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A context &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Document._AddConfiguration">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document._AddConfiguration">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">_AddConfiguration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Configuration</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add a configuration to the document&#39;s lists of design units.</span>

<span class="sd">		:param item:                Configuration object to be added to the document.</span>
<span class="sd">		:raises TypeError:          If parameter &#39;item&#39; is not of type :class:`~pyVHDLModel.DesignUnits.Configuration`.</span>
<span class="sd">		:raises VHDLModelException: If configuration name already exists in document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Configuration&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="p">:</span>
			<span class="c1"># TODO: use a more specific exception</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A configuration &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span></div>


	<span class="k">def</span><span class="w"> </span><span class="nf">_AddVerificationUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">VerificationUnit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationUnit</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;VerificationUnit&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">_normalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A verification unit &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">_identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_AddVerificationProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">VerificationProperty</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;VerificationProperty&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A verification property &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_AddVerificationMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">VerificationMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationMode</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;VerificationMode&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A verification mode &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span>

<div class="viewcode-block" id="Document._AddDesignUnit">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document._AddDesignUnit">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">_AddDesignUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">DesignUnit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add a design unit to the document&#39;s lists of design units.</span>

<span class="sd">		:param item:                Configuration object to be added to the document.</span>
<span class="sd">		:raises TypeError:          If parameter &#39;item&#39; is not of type :class:`~pyVHDLModel.DesignUnits.DesignUnit`.</span>
<span class="sd">		:raises ValueError:         If parameter &#39;item&#39; is an unknown :class:`~pyVHDLModel.DesignUnits.DesignUnit`.</span>
<span class="sd">		:raises VHDLModelException: If configuration name already exists in document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">DesignUnit</span><span class="p">):</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;DesignUnit&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span>

		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Entity</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddEntity</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddArchitecture</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Package</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddPackage</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddPackageBody</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Context</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddContext</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddConfiguration</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationUnit</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddVerificationUnit</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddVerificationProperty</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationMode</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_AddVerificationMode</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">ex</span> <span class="o">=</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is an unknown &#39;DesignUnit&#39;.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
				<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got type &#39;</span><span class="si">{</span><span class="n">getFullyQualifiedName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="n">ex</span></div>


	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the document&#39;s path (:attr:`_path`).</span>

<span class="sd">		:returns: The path of this document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">DesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all design units declarations found in this document (:attr:`_designUnits`).</span>

<span class="sd">		:returns: List of all design units.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Context</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all context declarations found in this document (:attr:`_contexts`).</span>

<span class="sd">		:returns: List of all contexts.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Configurations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all configuration declarations found in this document (:attr:`_configurations`).</span>

<span class="sd">		:returns: List of all configurations.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Entities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all entity declarations found in this document (:attr:`_entities`).</span>

<span class="sd">		:returns: List of all entities.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Architectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">]]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all architecture declarations found in this document (:attr:`_architectures`).</span>

<span class="sd">		:returns: List of all architectures.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">Packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Package</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all package declarations found in this document (:attr:`_packages`).</span>

<span class="sd">		:returns: List of all packages.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">PackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all package body declarations found in this document (:attr:`_packageBodies`).</span>

<span class="sd">		:returns: List of all package bodies.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">VerificationUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationUnit</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all verification unit declarations found in this document (:attr:`_verificationUnits`).</span>

<span class="sd">		:returns: List of all verification units.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">VerificationProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all verification properties declarations found in this document (:attr:`_verificationProperties`).</span>

<span class="sd">		:returns: List of all verification properties.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">VerificationModes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationMode</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access a list of all verification modes declarations found in this document (:attr:`_verificationModes`).</span>

<span class="sd">		:returns: List of all verification modes.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span>

	<span class="nd">@readonly</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">CompileOrderVertex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vertex</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Read-only property to access the corresponding compile-order vertex (:attr:`_compileOrderVertex`).</span>

<span class="sd">		The compile-order vertex references this document by its value field.</span>

<span class="sd">		:returns: The corresponding compile-order vertex.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderVertex</span>

<div class="viewcode-block" id="Document.IterateDesignUnits">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document.IterateDesignUnits">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="nf">IterateDesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">DesignUnitKind</span> <span class="o">=</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">All</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Iterate all design units in the document.</span>

<span class="sd">		A union of :class:`DesignUnitKind` values can be given to filter the returned result for suitable design units.</span>

<span class="sd">		.. rubric:: Algorithm</span>

<span class="sd">		* If contexts are selected in the filter:</span>

<span class="sd">		  1. Iterate all contexts in that library.</span>

<span class="sd">		* If packages are selected in the filter:</span>

<span class="sd">		  1. Iterate all packages in that library.</span>

<span class="sd">		* If package bodies are selected in the filter:</span>

<span class="sd">		  1. Iterate all package bodies in that library.</span>

<span class="sd">		* If entites are selected in the filter:</span>

<span class="sd">		  1. Iterate all entites in that library.</span>

<span class="sd">		* If architectures are selected in the filter:</span>

<span class="sd">		  1. Iterate all architectures in that library.</span>

<span class="sd">		* If configurations are selected in the filter:</span>

<span class="sd">		  1. Iterate all configurations in that library.</span>

<span class="sd">		:param filter: An enumeration with possibly multiple flags to filter the returned design units.</span>
<span class="sd">		:returns:      A generator to iterate all matched design units in the document.</span>

<span class="sd">		.. seealso::</span>

<span class="sd">		   :meth:`pyVHDLModel.Design.IterateDesignUnits`</span>
<span class="sd">		     Iterate all design units in the design.</span>
<span class="sd">		   :meth:`pyVHDLModel.Library.IterateDesignUnits`</span>
<span class="sd">		     Iterate all design units in the library.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Context</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">context</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">package</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">PackageBody</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">packageBody</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Entity</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">entity</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Architecture</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
					<span class="k">yield</span> <span class="n">architecture</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Configuration</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">configuration</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">configuration</span></div>


		<span class="c1"># for verificationProperty in self._verificationUnits.values():</span>
		<span class="c1"># 	yield verificationProperty</span>
		<span class="c1"># for verificationUnit in self._verificationProperties.values():</span>
		<span class="c1"># 	yield entity</span>
		<span class="c1"># for verificationMode in self._verificationModes.values():</span>
		<span class="c1"># 	yield verificationMode</span>

<div class="viewcode-block" id="Document.__repr__">
<a class="viewcode-back" href="../pyVHDLModel/pyVHDLModel.html#pyVHDLModel.Document.__repr__">[docs]</a>
	<span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats a representation of the document.</span>

<span class="sd">		**Format:** ``Document: &#39;path/to/file.vhdl&#39;``</span>

<span class="sd">		:returns: String representation of the document.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Document: &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="si">}</span><span class="s2">&#39;&quot;</span></div>


	<span class="fm">__str__</span> <span class="o">=</span> <span class="fm">__repr__</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2025, Patrick Lehmann.
      <span class="lastupdated">Last updated on 21.11.2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>